<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>codegen_nvptx.cc source code [tvm/src/target/llvm/codegen_nvptx.cc] - Woboq Code Browser</title>
<meta name="woboq:interestingDefinitions" content="tvm::codegen::CodeGenNVPTX "/>
<link rel="stylesheet" href="../../../.././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../.././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../.././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../.././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'tvm/src/target/llvm/codegen_nvptx.cc'; var root_path = '../../../..'; var data_path = '../../../.././data'; var ecma_script_api_version = 2;</script>
<script src='../../../.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>tvm</a>/<a href='../..'>src</a>/<a href='..'>target</a>/<a href='./'>llvm</a>/<a href='codegen_nvptx.cc.html'>codegen_nvptx.cc</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> * Licensed to the Apache Software Foundation (ASF) under one</i></td></tr>
<tr><th id="3">3</th><td><i> * or more contributor license agreements.  See the NOTICE file</i></td></tr>
<tr><th id="4">4</th><td><i> * distributed with this work for additional information</i></td></tr>
<tr><th id="5">5</th><td><i> * regarding copyright ownership.  The ASF licenses this file</i></td></tr>
<tr><th id="6">6</th><td><i> * to you under the Apache License, Version 2.0 (the</i></td></tr>
<tr><th id="7">7</th><td><i> * "License"); you may not use this file except in compliance</i></td></tr>
<tr><th id="8">8</th><td><i> * with the License.  You may obtain a copy of the License at</i></td></tr>
<tr><th id="9">9</th><td><i> *</i></td></tr>
<tr><th id="10">10</th><td><i> *   <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></i></td></tr>
<tr><th id="11">11</th><td><i> *</i></td></tr>
<tr><th id="12">12</th><td><i> * Unless required by applicable law or agreed to in writing,</i></td></tr>
<tr><th id="13">13</th><td><i> * software distributed under the License is distributed on an</i></td></tr>
<tr><th id="14">14</th><td><i> * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</i></td></tr>
<tr><th id="15">15</th><td><i> * KIND, either express or implied.  See the License for the</i></td></tr>
<tr><th id="16">16</th><td><i> * specific language governing permissions and limitations</i></td></tr>
<tr><th id="17">17</th><td><i> * under the License.</i></td></tr>
<tr><th id="18">18</th><td><i> */</i></td></tr>
<tr><th id="19">19</th><td></td></tr>
<tr><th id="20">20</th><td><i class="doc">/*!</i></td></tr>
<tr><th id="21">21</th><td><i class="doc"> * <span class="command">\file</span> <span class="verb">codegen_nvptx.cc</span></i></td></tr>
<tr><th id="22">22</th><td><i class="doc"> * <span class="command">\brief</span> NVPTX code generator.</i></td></tr>
<tr><th id="23">23</th><td><i class="doc"> */</i></td></tr>
<tr><th id="24">24</th><td><u>#<span data-ppcond="24">ifdef</span> <span class="macro" data-ref="_M/TVM_LLVM_VERSION">TVM_LLVM_VERSION</span></u></td></tr>
<tr><th id="25">25</th><td></td></tr>
<tr><th id="26">26</th><td><u>#include &lt;llvm/ADT/SmallString.h&gt;</u></td></tr>
<tr><th id="27">27</th><td><u>#include &lt;llvm/IR/Attributes.h&gt;</u></td></tr>
<tr><th id="28">28</th><td><u>#include &lt;llvm/IR/Function.h&gt;</u></td></tr>
<tr><th id="29">29</th><td><u>#include &lt;llvm/IR/GlobalValue.h&gt;</u></td></tr>
<tr><th id="30">30</th><td><u>#include &lt;llvm/IR/InlineAsm.h&gt;</u></td></tr>
<tr><th id="31">31</th><td><u>#include &lt;llvm/IR/Instructions.h&gt;</u></td></tr>
<tr><th id="32">32</th><td><u>#include &lt;llvm/IR/Intrinsics.h&gt;</u></td></tr>
<tr><th id="33">33</th><td><u>#<span data-ppcond="33">if</span> <span class="macro" title="140" data-ref="_M/TVM_LLVM_VERSION">TVM_LLVM_VERSION</span> &gt;= 100</u></td></tr>
<tr><th id="34">34</th><td><u>#include &lt;llvm/IR/IntrinsicsNVPTX.h&gt;</u></td></tr>
<tr><th id="35">35</th><td><u>#<span data-ppcond="33">endif</span></u></td></tr>
<tr><th id="36">36</th><td><u>#include &lt;llvm/IR/LegacyPassManager.h&gt;</u></td></tr>
<tr><th id="37">37</th><td><u>#include &lt;llvm/IR/Metadata.h&gt;</u></td></tr>
<tr><th id="38">38</th><td><u>#include &lt;llvm/IR/Module.h&gt;</u></td></tr>
<tr><th id="39">39</th><td><u>#include &lt;llvm/IR/Type.h&gt;</u></td></tr>
<tr><th id="40">40</th><td><u>#include &lt;llvm/IRReader/IRReader.h&gt;</u></td></tr>
<tr><th id="41">41</th><td><u>#<span data-ppcond="41">if</span> <span class="macro" title="140" data-ref="_M/TVM_LLVM_VERSION">TVM_LLVM_VERSION</span> &gt;= 100</u></td></tr>
<tr><th id="42">42</th><td><u>#include &lt;llvm/Support/Alignment.h&gt;</u></td></tr>
<tr><th id="43">43</th><td><u>#<span data-ppcond="41">endif</span></u></td></tr>
<tr><th id="44">44</th><td><u>#include &lt;llvm/Support/CodeGen.h&gt;</u></td></tr>
<tr><th id="45">45</th><td><u>#include &lt;llvm/Support/SourceMgr.h&gt;</u></td></tr>
<tr><th id="46">46</th><td><u>#include &lt;llvm/Support/raw_ostream.h&gt;</u></td></tr>
<tr><th id="47">47</th><td><u>#include &lt;llvm/Target/TargetMachine.h&gt;</u></td></tr>
<tr><th id="48">48</th><td><u>#include &lt;llvm/Transforms/IPO/PassManagerBuilder.h&gt;</u></td></tr>
<tr><th id="49">49</th><td><u>#include <a href="../../../include/tvm/runtime/device_api.h.html">&lt;tvm/runtime/device_api.h&gt;</a></u></td></tr>
<tr><th id="50">50</th><td></td></tr>
<tr><th id="51">51</th><td><u>#include <a href="../../../../include/c++/10/memory.html">&lt;memory&gt;</a></u></td></tr>
<tr><th id="52">52</th><td><u>#include <a href="../../../../include/c++/10/string.html">&lt;string&gt;</a></u></td></tr>
<tr><th id="53">53</th><td><u>#include <a href="../../../../include/c++/10/utility.html">&lt;utility&gt;</a></u></td></tr>
<tr><th id="54">54</th><td><u>#include <a href="../../../../include/c++/10/vector.html">&lt;vector&gt;</a></u></td></tr>
<tr><th id="55">55</th><td></td></tr>
<tr><th id="56">56</th><td><u>#include <a href="../../runtime/cuda/cuda_module.h.html">"../../runtime/cuda/cuda_module.h"</a></u></td></tr>
<tr><th id="57">57</th><td><u>#include <a href="../build_common.h.html">"../build_common.h"</a></u></td></tr>
<tr><th id="58">58</th><td><u>#include <a href="codegen_llvm.h.html">"codegen_llvm.h"</a></u></td></tr>
<tr><th id="59">59</th><td><u>#include <a href="llvm_instance.h.html">"llvm_instance.h"</a></u></td></tr>
<tr><th id="60">60</th><td></td></tr>
<tr><th id="61">61</th><td><b>namespace</b> <span class="namespace">tvm</span> {</td></tr>
<tr><th id="62">62</th><td><b>namespace</b> <span class="namespace">codegen</span> {</td></tr>
<tr><th id="63">63</th><td></td></tr>
<tr><th id="64">64</th><td><i>// NVPTX code generator.</i></td></tr>
<tr><th id="65">65</th><td><b>class</b> <dfn class="type def" id="tvm::codegen::CodeGenNVPTX" title='tvm::codegen::CodeGenNVPTX' data-ref="tvm::codegen::CodeGenNVPTX" data-ref-filename="tvm..codegen..CodeGenNVPTX">CodeGenNVPTX</dfn> : <b>public</b> <a class="type" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM" title='tvm::codegen::CodeGenLLVM' data-ref="tvm::codegen::CodeGenLLVM" data-ref-filename="tvm..codegen..CodeGenLLVM">CodeGenLLVM</a> {</td></tr>
<tr><th id="66">66</th><td> <b>public</b>:</td></tr>
<tr><th id="67">67</th><td>  <em>void</em> <dfn class="virtual decl def fn" id="_ZN3tvm7codegen12CodeGenNVPTX11AddFunctionERKNS_3tir8PrimFuncE" title='tvm::codegen::CodeGenNVPTX::AddFunction' data-ref="_ZN3tvm7codegen12CodeGenNVPTX11AddFunctionERKNS_3tir8PrimFuncE" data-ref-filename="_ZN3tvm7codegen12CodeGenNVPTX11AddFunctionERKNS_3tir8PrimFuncE">AddFunction</dfn>(<em>const</em> <a class="type" href="../../../include/tvm/tir/function.h.html#tvm::tir::PrimFunc" title='tvm::tir::PrimFunc' data-ref="tvm::tir::PrimFunc" data-ref-filename="tvm..tir..PrimFunc">PrimFunc</a>&amp; <dfn class="local col5 decl" id="5f" title='f' data-type='const tvm::tir::PrimFunc &amp;' data-ref="5f" data-ref-filename="5f">f</dfn>) final {</td></tr>
<tr><th id="68">68</th><td>    <i>// add function as void return value</i></td></tr>
<tr><th id="69">69</th><td>    <a class="type" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM" title='tvm::codegen::CodeGenLLVM' data-ref="tvm::codegen::CodeGenLLVM" data-ref-filename="tvm..codegen..CodeGenLLVM">CodeGenLLVM</a>::<a class="member fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM19AddFunctionInternalERKNS_3tir8PrimFuncEb" title='tvm::codegen::CodeGenLLVM::AddFunctionInternal' data-ref="_ZN3tvm7codegen11CodeGenLLVM19AddFunctionInternalERKNS_3tir8PrimFuncEb" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM19AddFunctionInternalERKNS_3tir8PrimFuncEb">AddFunctionInternal</a>(<a class="local col5 ref" href="#5f" title='f' data-ref="5f" data-ref-filename="5f">f</a>, <b>true</b>);</td></tr>
<tr><th id="70">70</th><td>    <i>// annotate as kernel function</i></td></tr>
<tr><th id="71">71</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::LLVMContext' data-ref="llvm::LLVMContext" data-ref-filename="llvm..LLVMContext">LLVMContext</span>* <dfn class="local col6 decl" id="6ctx" title='ctx' data-type='llvm::LLVMContext *' data-ref="6ctx" data-ref-filename="6ctx">ctx</dfn> = <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::llvm_target_" title='tvm::codegen::CodeGenLLVM::llvm_target_' data-ref="tvm::codegen::CodeGenLLVM::llvm_target_" data-ref-filename="tvm..codegen..CodeGenLLVM..llvm_target_">llvm_target_</a>-&gt;<a class="ref fn" href="llvm_instance.h.html#_ZNK3tvm7codegen10LLVMTarget10GetContextEv" title='tvm::codegen::LLVMTarget::GetContext' data-ref="_ZNK3tvm7codegen10LLVMTarget10GetContextEv" data-ref-filename="_ZNK3tvm7codegen10LLVMTarget10GetContextEv">GetContext</a>();</td></tr>
<tr><th id="72">72</th><td>    <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::module_" title='tvm::codegen::CodeGenLLVM::module_' data-ref="tvm::codegen::CodeGenLLVM::module_" data-ref-filename="tvm..codegen..CodeGenLLVM..module_">module_</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><span class='ref fn' title='llvm::Module::getOrInsertNamedMetadata' data-ref="_ZN4llvm6Module24getOrInsertNamedMetadataENS_9StringRefE" data-ref-filename="_ZN4llvm6Module24getOrInsertNamedMetadataENS_9StringRefE">getOrInsertNamedMetadata</span>(<span class='ref fn fake' title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></span><q>"nvvm.annotations"</q>)</td></tr>
<tr><th id="73">73</th><td>        -&gt;<span class='ref fn' title='llvm::NamedMDNode::addOperand' data-ref="_ZN4llvm11NamedMDNode10addOperandEPNS_6MDNodeE" data-ref-filename="_ZN4llvm11NamedMDNode10addOperandEPNS_6MDNodeE">addOperand</span>(<span class="namespace">llvm::</span><span class='type' title='llvm::MDNode' data-ref="llvm::MDNode" data-ref-filename="llvm..MDNode">MDNode</span>::<span class='ref fn' title='llvm::MDNode::get' data-ref="_ZN4llvm6MDNode3getERNS_11LLVMContextENS_8ArrayRefIPNS_8MetadataEEE" data-ref-filename="_ZN4llvm6MDNode3getERNS_11LLVMContextENS_8ArrayRefIPNS_8MetadataEEE">get</span>(</td></tr>
<tr><th id="74">74</th><td>            <span class='refarg'>*<a class="local col6 ref" href="#6ctx" title='ctx' data-ref="6ctx" data-ref-filename="6ctx">ctx</a></span>, <span class='ref fn fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E" data-ref-filename="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></span>{<span class="namespace">llvm::</span><span class='type' title='llvm::ValueAsMetadata' data-ref="llvm::ValueAsMetadata" data-ref-filename="llvm..ValueAsMetadata">ValueAsMetadata</span>::<span class='ref fn' title='llvm::ValueAsMetadata::get' data-ref="_ZN4llvm15ValueAsMetadata3getEPNS_5ValueE" data-ref-filename="_ZN4llvm15ValueAsMetadata3getEPNS_5ValueE">get</span>(<a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::function_" title='tvm::codegen::CodeGenLLVM::function_' data-ref="tvm::codegen::CodeGenLLVM::function_" data-ref-filename="tvm..codegen..CodeGenLLVM..function_">function_</a>), <span class="namespace">llvm::</span><span class='type' title='llvm::MDString' data-ref="llvm::MDString" data-ref-filename="llvm..MDString">MDString</span>::<span class='ref fn' title='llvm::MDString::get' data-ref="_ZN4llvm8MDString3getERNS_11LLVMContextEPKc" data-ref-filename="_ZN4llvm8MDString3getERNS_11LLVMContextEPKc">get</span>(<span class='refarg'>*<a class="local col6 ref" href="#6ctx" title='ctx' data-ref="6ctx" data-ref-filename="6ctx">ctx</a></span>, <q>"kernel"</q>),</td></tr>
<tr><th id="75">75</th><td>                   <span class="namespace">llvm::</span><span class='type' title='llvm::ValueAsMetadata' data-ref="llvm::ValueAsMetadata" data-ref-filename="llvm..ValueAsMetadata">ValueAsMetadata</span>::<span class='ref fn' title='llvm::ValueAsMetadata::get' data-ref="_ZN4llvm15ValueAsMetadata3getEPNS_5ValueE" data-ref-filename="_ZN4llvm15ValueAsMetadata3getEPNS_5ValueE">get</span>(<a class="member fn" href="codegen_llvm.h.html#_ZNK3tvm7codegen11CodeGenLLVM10ConstInt32El" title='tvm::codegen::CodeGenLLVM::ConstInt32' data-ref="_ZNK3tvm7codegen11CodeGenLLVM10ConstInt32El" data-ref-filename="_ZNK3tvm7codegen11CodeGenLLVM10ConstInt32El">ConstInt32</a>(<var>1</var>))}));</td></tr>
<tr><th id="76">76</th><td>  }</td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td>  <em>void</em> <dfn class="virtual decl def fn" id="_ZN3tvm7codegen12CodeGenNVPTX10VisitStmt_EPKNS_3tir12AllocateNodeE" title='tvm::codegen::CodeGenNVPTX::VisitStmt_' data-ref="_ZN3tvm7codegen12CodeGenNVPTX10VisitStmt_EPKNS_3tir12AllocateNodeE" data-ref-filename="_ZN3tvm7codegen12CodeGenNVPTX10VisitStmt_EPKNS_3tir12AllocateNodeE">VisitStmt_</dfn>(<em>const</em> <a class="type" href="../../../include/tvm/tir/stmt.h.html#tvm::tir::AllocateNode" title='tvm::tir::AllocateNode' data-ref="tvm::tir::AllocateNode" data-ref-filename="tvm..tir..AllocateNode">AllocateNode</a>* <dfn class="local col7 decl" id="7op" title='op' data-type='const tvm::tir::AllocateNode *' data-ref="7op" data-ref-filename="7op">op</dfn>) final {</td></tr>
<tr><th id="79">79</th><td>    <a class="macro" href="../../../include/tvm/runtime/logging.h.html#680" title="if (!(!is_zero(op-&gt;condition))) ::tvm::runtime::detail::LogFatal(&quot;/home/runner/work/tvm-woboq/tvm-woboq/tvm/src/target/llvm/codegen_nvptx.cc&quot;, 79).stream() &lt;&lt; ::tvm::runtime::detail::kTVM_INTERNAL_ERROR_MESSAGE &lt;&lt; &quot;  &quot; &lt;&lt; &quot;Check failed: (&quot; &quot;!is_zero(op-&gt;condition)&quot; &lt;&lt; &quot;) is false: &quot;" data-ref="_M/ICHECK">ICHECK</a>(!<a class="ref fn" href="../../../include/tvm/tir/op.h.html#_ZN3tvm3tir7is_zeroERKNS_8PrimExprE" title='tvm::tir::is_zero' data-ref="_ZN3tvm3tir7is_zeroERKNS_8PrimExprE" data-ref-filename="_ZN3tvm3tir7is_zeroERKNS_8PrimExprE">is_zero</a>(<a class="local col7 ref" href="#7op" title='op' data-ref="7op" data-ref-filename="7op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/stmt.h.html#tvm::tir::AllocateNode::condition" title='tvm::tir::AllocateNode::condition' data-ref="tvm::tir::AllocateNode::condition" data-ref-filename="tvm..tir..AllocateNode..condition">condition</a>));</td></tr>
<tr><th id="80">80</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</span>* <dfn class="local col8 decl" id="8buf" title='buf' data-type='llvm::Value *' data-ref="8buf" data-ref-filename="8buf">buf</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="81">81</th><td>    <a class="type" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::StorageInfo" title='tvm::codegen::CodeGenLLVM::StorageInfo' data-ref="tvm::codegen::CodeGenLLVM::StorageInfo" data-ref-filename="tvm..codegen..CodeGenLLVM..StorageInfo">StorageInfo</a>&amp; <dfn class="local col9 decl" id="9info" title='info' data-type='tvm::codegen::CodeGenLLVM::StorageInfo &amp;' data-ref="9info" data-ref-filename="9info">info</dfn> = <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::alloc_storage_info_" title='tvm::codegen::CodeGenLLVM::alloc_storage_info_' data-ref="tvm::codegen::CodeGenLLVM::alloc_storage_info_" data-ref-filename="tvm..codegen..CodeGenLLVM..alloc_storage_info_">alloc_storage_info_</a><a class="ref fn" href="../../../../include/c++/10/bits/unordered_map.h.html#_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" data-ref-filename="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368">[<a class="local col7 ref" href="#7op" title='op' data-ref="7op" data-ref-filename="7op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/stmt.h.html#tvm::tir::AllocateNode::buffer_var" title='tvm::tir::AllocateNode::buffer_var' data-ref="tvm::tir::AllocateNode::buffer_var" data-ref-filename="tvm..tir..AllocateNode..buffer_var">buffer_var</a>.<a class="ref fn" href="../../../include/tvm/tir/var.h.html#_ZNK3tvm3tir3Var3getEv" title='tvm::tir::Var::get' data-ref="_ZNK3tvm3tir3Var3getEv" data-ref-filename="_ZNK3tvm3tir3Var3getEv">get</a>()]</a>;</td></tr>
<tr><th id="82">82</th><td>    <i>// maximum necessary alignment in the NV devices</i></td></tr>
<tr><th id="83">83</th><td>    <b>if</b> (<a class="local col9 ref" href="#9info" title='info' data-ref="9info" data-ref-filename="9info">info</a>.<a class="ref field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::StorageInfo::alignment" title='tvm::codegen::CodeGenLLVM::StorageInfo::alignment' data-ref="tvm::codegen::CodeGenLLVM::StorageInfo::alignment" data-ref-filename="tvm..codegen..CodeGenLLVM..StorageInfo..alignment">alignment</a> &gt; <var>16</var>) {</td></tr>
<tr><th id="84">84</th><td>      <a class="local col9 ref" href="#9info" title='info' data-ref="9info" data-ref-filename="9info">info</a>.<a class="ref field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::StorageInfo::alignment" title='tvm::codegen::CodeGenLLVM::StorageInfo::alignment' data-ref="tvm::codegen::CodeGenLLVM::StorageInfo::alignment" data-ref-filename="tvm..codegen..CodeGenLLVM..StorageInfo..alignment">alignment</a> = <var>16</var>;</td></tr>
<tr><th id="85">85</th><td>    }</td></tr>
<tr><th id="86">86</th><td></td></tr>
<tr><th id="87">87</th><td>    <em>auto</em> <dfn class="local col0 decl" id="10storage_scope" title='storage_scope' data-type='tvm::runtime::StorageScope' data-ref="10storage_scope" data-ref-filename="10storage_scope">storage_scope</dfn> = <span class="namespace">runtime::</span><a class="type" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::StorageScope" title='tvm::runtime::StorageScope' data-ref="tvm::runtime::StorageScope" data-ref-filename="tvm..runtime..StorageScope">StorageScope</a>::<a class="ref fn" href="../../runtime/thread_storage_scope.h.html#_ZN3tvm7runtime12StorageScope6CreateERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='tvm::runtime::StorageScope::Create' data-ref="_ZN3tvm7runtime12StorageScope6CreateERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" data-ref-filename="_ZN3tvm7runtime12StorageScope6CreateERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE">Create</a>(<a class="ref fn fake" href="../../../include/tvm/runtime/container/string.h.html#_ZNK3tvm7runtime6StringcvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv" title='tvm::runtime::String::operator basic_string' data-ref="_ZNK3tvm7runtime6StringcvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv" data-ref-filename="_ZNK3tvm7runtime6StringcvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv"></a><a class="ref fn" href="../../tir/transforms/ir_utils.h.html#_ZN3tvm3tir18GetPtrStorageScopeENS0_3VarE" title='tvm::tir::GetPtrStorageScope' data-ref="_ZN3tvm3tir18GetPtrStorageScopeENS0_3VarE" data-ref-filename="_ZN3tvm3tir18GetPtrStorageScopeENS0_3VarE">GetPtrStorageScope</a>(<a class="ref fn fake" href="../../../include/tvm/tir/var.h.html#88" title='tvm::tir::Var::Var' data-ref="_ZN3tvm3tir3VarC1ERKS1_" data-ref-filename="_ZN3tvm3tir3VarC1ERKS1_"></a><a class="local col7 ref" href="#7op" title='op' data-ref="7op" data-ref-filename="7op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/stmt.h.html#tvm::tir::AllocateNode::buffer_var" title='tvm::tir::AllocateNode::buffer_var' data-ref="tvm::tir::AllocateNode::buffer_var" data-ref-filename="tvm..tir..AllocateNode..buffer_var">buffer_var</a>));</td></tr>
<tr><th id="88">88</th><td>    <b>if</b> (<a class="local col0 ref" href="#10storage_scope" title='storage_scope' data-ref="10storage_scope" data-ref-filename="10storage_scope">storage_scope</a>.<a class="ref field" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::StorageScope::rank" title='tvm::runtime::StorageScope::rank' data-ref="tvm::runtime::StorageScope::rank" data-ref-filename="tvm..runtime..StorageScope..rank">rank</a> == <span class="namespace">runtime::</span><a class="type" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::StorageRank" title='tvm::runtime::StorageRank' data-ref="tvm::runtime::StorageRank" data-ref-filename="tvm..runtime..StorageRank">StorageRank</a>::<a class="enum" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::StorageRank::kShared" title='tvm::runtime::StorageRank::kShared' data-ref="tvm::runtime::StorageRank::kShared" data-ref-filename="tvm..runtime..StorageRank..kShared">kShared</a> &amp;&amp; <a class="local col0 ref" href="#10storage_scope" title='storage_scope' data-ref="10storage_scope" data-ref-filename="10storage_scope">storage_scope</a>.<a class="ref field" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::StorageScope::tag" title='tvm::runtime::StorageScope::tag' data-ref="tvm::runtime::StorageScope::tag" data-ref-filename="tvm..runtime..StorageScope..tag">tag</a> <a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZSteqRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" title='std::operator==' data-ref="_ZSteqRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZSteqRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_">==</a> <q>".dyn"</q>) {</td></tr>
<tr><th id="89">89</th><td>      <i>// Shared memory: address space  == 3</i></td></tr>
<tr><th id="90">90</th><td>      <a class="local col8 ref" href="#8buf" title='buf' data-ref="8buf" data-ref-filename="8buf">buf</a> =</td></tr>
<tr><th id="91">91</th><td>          <a class="member fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM20AllocateSharedMemoryENS_7runtime8DataTypeEmjiN4llvm11GlobalValue12LinkageTypesE" title='tvm::codegen::CodeGenLLVM::AllocateSharedMemory' data-ref="_ZN3tvm7codegen11CodeGenLLVM20AllocateSharedMemoryENS_7runtime8DataTypeEmjiN4llvm11GlobalValue12LinkageTypesE" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM20AllocateSharedMemoryENS_7runtime8DataTypeEmjiN4llvm11GlobalValue12LinkageTypesE">AllocateSharedMemory</a>(<a class="ref fn fake" href="../../../include/tvm/runtime/data_type.h.html#41" title='tvm::runtime::DataType::DataType' data-ref="_ZN3tvm7runtime8DataTypeC1ERKS1_" data-ref-filename="_ZN3tvm7runtime8DataTypeC1ERKS1_"></a><a class="local col7 ref" href="#7op" title='op' data-ref="7op" data-ref-filename="7op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/stmt.h.html#tvm::tir::AllocateNode::dtype" title='tvm::tir::AllocateNode::dtype' data-ref="tvm::tir::AllocateNode::dtype" data-ref-filename="tvm..tir..AllocateNode..dtype">dtype</a>, <var>0</var>, <var>3</var>, <a class="local col9 ref" href="#9info" title='info' data-ref="9info" data-ref-filename="9info">info</a>.<a class="ref field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::StorageInfo::alignment" title='tvm::codegen::CodeGenLLVM::StorageInfo::alignment' data-ref="tvm::codegen::CodeGenLLVM::StorageInfo::alignment" data-ref-filename="tvm..codegen..CodeGenLLVM..StorageInfo..alignment">alignment</a>, <span class="namespace">llvm::</span><span class='type' title='llvm::GlobalValue' data-ref="llvm::GlobalValue" data-ref-filename="llvm..GlobalValue">GlobalValue</span>::<span class='enum' title='llvm::GlobalValue::ExternalLinkage' data-ref="llvm::GlobalValue::ExternalLinkage" data-ref-filename="llvm..GlobalValue..ExternalLinkage">ExternalLinkage</span>);</td></tr>
<tr><th id="92">92</th><td>    } <b>else</b> {</td></tr>
<tr><th id="93">93</th><td>      <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col1 decl" id="11constant_size" title='constant_size' data-type='size_t' data-ref="11constant_size" data-ref-filename="11constant_size">constant_size</dfn> = <a class="local col7 ref" href="#7op" title='op' data-ref="7op" data-ref-filename="7op">op</a>-&gt;<a class="ref fn" href="../../../include/tvm/tir/stmt.h.html#_ZNK3tvm3tir12AllocateNode22ConstantAllocationSizeEv" title='tvm::tir::AllocateNode::ConstantAllocationSize' data-ref="_ZNK3tvm3tir12AllocateNode22ConstantAllocationSizeEv" data-ref-filename="_ZNK3tvm3tir12AllocateNode22ConstantAllocationSizeEv">ConstantAllocationSize</a>();</td></tr>
<tr><th id="94">94</th><td>      <a class="macro" href="../../../include/tvm/runtime/logging.h.html#687" title="if (auto __tvm__log__err = ::tvm::runtime::detail::LogCheck_GT(constant_size, 0)) ::tvm::runtime::detail::LogFatal(&quot;/home/runner/work/tvm-woboq/tvm-woboq/tvm/src/target/llvm/codegen_nvptx.cc&quot;, 94).stream() &lt;&lt; ::tvm::runtime::detail::kTVM_INTERNAL_ERROR_MESSAGE &lt;&lt; std::endl &lt;&lt; &quot;  &quot; &lt;&lt; &quot;Check failed: &quot; &lt;&lt; &quot;constant_size&quot; &quot; &quot; &quot;&gt;&quot; &quot; &quot; &quot;0&quot; &lt;&lt; *__tvm__log__err &lt;&lt; &quot;: &quot;" data-ref="_M/ICHECK_GT">ICHECK_GT</a>(<a class="local col1 ref" href="#11constant_size" title='constant_size' data-ref="11constant_size" data-ref-filename="11constant_size">constant_size</a>, <var>0</var>) <a class="ref fn" href="../../../../include/c++/10/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"Can only handle constant size stack allocation in GPU"</q>;</td></tr>
<tr><th id="95">95</th><td></td></tr>
<tr><th id="96">96</th><td>      <b>if</b> (<a class="local col1 ref" href="#11constant_size" title='constant_size' data-ref="11constant_size" data-ref-filename="11constant_size">constant_size</a> % <var>4</var> == <var>0</var> &amp;&amp; <a class="local col9 ref" href="#9info" title='info' data-ref="9info" data-ref-filename="9info">info</a>.<a class="ref field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::StorageInfo::alignment" title='tvm::codegen::CodeGenLLVM::StorageInfo::alignment' data-ref="tvm::codegen::CodeGenLLVM::StorageInfo::alignment" data-ref-filename="tvm..codegen..CodeGenLLVM..StorageInfo..alignment">alignment</a> == <var>0</var>) {</td></tr>
<tr><th id="97">97</th><td>        <a class="local col9 ref" href="#9info" title='info' data-ref="9info" data-ref-filename="9info">info</a>.<a class="ref field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::StorageInfo::alignment" title='tvm::codegen::CodeGenLLVM::StorageInfo::alignment' data-ref="tvm::codegen::CodeGenLLVM::StorageInfo::alignment" data-ref-filename="tvm..codegen..CodeGenLLVM..StorageInfo..alignment">alignment</a> = <a class="ref fn" href="../../tir/transforms/ir_utils.h.html#_ZN3tvm3tir22GetTempAllocaAlignmentENS_7runtime8DataTypeEi" title='tvm::tir::GetTempAllocaAlignment' data-ref="_ZN3tvm3tir22GetTempAllocaAlignmentENS_7runtime8DataTypeEi" data-ref-filename="_ZN3tvm3tir22GetTempAllocaAlignmentENS_7runtime8DataTypeEi">GetTempAllocaAlignment</a>(<a class="ref fn fake" href="../../../include/tvm/runtime/data_type.h.html#41" title='tvm::runtime::DataType::DataType' data-ref="_ZN3tvm7runtime8DataTypeC1ERKS1_" data-ref-filename="_ZN3tvm7runtime8DataTypeC1ERKS1_"></a><a class="local col7 ref" href="#7op" title='op' data-ref="7op" data-ref-filename="7op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/stmt.h.html#tvm::tir::AllocateNode::dtype" title='tvm::tir::AllocateNode::dtype' data-ref="tvm::tir::AllocateNode::dtype" data-ref-filename="tvm..tir..AllocateNode..dtype">dtype</a>, <a class="local col1 ref" href="#11constant_size" title='constant_size' data-ref="11constant_size" data-ref-filename="11constant_size">constant_size</a>);</td></tr>
<tr><th id="98">98</th><td>      }</td></tr>
<tr><th id="99">99</th><td>      <b>if</b> (<a class="local col0 ref" href="#10storage_scope" title='storage_scope' data-ref="10storage_scope" data-ref-filename="10storage_scope">storage_scope</a>.<a class="ref field" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::StorageScope::rank" title='tvm::runtime::StorageScope::rank' data-ref="tvm::runtime::StorageScope::rank" data-ref-filename="tvm..runtime..StorageScope..rank">rank</a> == <span class="namespace">runtime::</span><a class="type" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::StorageRank" title='tvm::runtime::StorageRank' data-ref="tvm::runtime::StorageRank" data-ref-filename="tvm..runtime..StorageRank">StorageRank</a>::<a class="enum" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::StorageRank::kLocal" title='tvm::runtime::StorageRank::kLocal' data-ref="tvm::runtime::StorageRank::kLocal" data-ref-filename="tvm..runtime..StorageRank..kLocal">kLocal</a>) {</td></tr>
<tr><th id="100">100</th><td>        <i>// const int local_address_space = 5;</i></td></tr>
<tr><th id="101">101</th><td><i>        // TODO(tqchen): for higher version of LLVM, local address space can be set.</i></td></tr>
<tr><th id="102">102</th><td>        <span class="namespace">llvm::</span><span class='type' title='llvm::AllocaInst' data-ref="llvm::AllocaInst" data-ref-filename="llvm..AllocaInst">AllocaInst</span>* <dfn class="local col2 decl" id="12alloca" title='alloca' data-type='llvm::AllocaInst *' data-ref="12alloca" data-ref-filename="12alloca">alloca</dfn> = <a class="local col3 member fn" href="codegen_llvm.h.html#13WithFunctionEntry" title='WithFunctionEntry' data-ref="13WithFunctionEntry" data-ref-filename="13WithFunctionEntry">WithFunctionEntry</a>([&amp;]() {</td></tr>
<tr><th id="103">103</th><td>          <b>return</b> <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::builder_" title='tvm::codegen::CodeGenLLVM::builder_' data-ref="tvm::codegen::CodeGenLLVM::builder_" data-ref-filename="tvm..codegen..CodeGenLLVM..builder_">builder_</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><span class='ref fn' title='llvm::IRBuilderBase::CreateAlloca' data-ref="_ZN4llvm13IRBuilderBase12CreateAllocaEPNS_4TypeEPNS_5ValueERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase12CreateAllocaEPNS_4TypeEPNS_5ValueERKNS_5TwineE">CreateAlloca</span>(<a class="member fn" href="codegen_llvm.h.html#_ZNK3tvm7codegen11CodeGenLLVM15DTypeToLLVMTypeERKNS_7runtime8DataTypeE" title='tvm::codegen::CodeGenLLVM::DTypeToLLVMType' data-ref="_ZNK3tvm7codegen11CodeGenLLVM15DTypeToLLVMTypeERKNS_7runtime8DataTypeE" data-ref-filename="_ZNK3tvm7codegen11CodeGenLLVM15DTypeToLLVMTypeERKNS_7runtime8DataTypeE">DTypeToLLVMType</a>(<a class="local col7 ref" href="#7op" title='op' data-ref="7op" data-ref-filename="7op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/stmt.h.html#tvm::tir::AllocateNode::dtype" title='tvm::tir::AllocateNode::dtype' data-ref="tvm::tir::AllocateNode::dtype" data-ref-filename="tvm..tir..AllocateNode..dtype">dtype</a>), <a class="member fn" href="codegen_llvm.h.html#_ZNK3tvm7codegen11CodeGenLLVM10ConstInt32El" title='tvm::codegen::CodeGenLLVM::ConstInt32' data-ref="_ZNK3tvm7codegen11CodeGenLLVM10ConstInt32El" data-ref-filename="_ZNK3tvm7codegen11CodeGenLLVM10ConstInt32El">ConstInt32</a>(<a class="local col1 ref" href="#11constant_size" title='constant_size' data-ref="11constant_size" data-ref-filename="11constant_size">constant_size</a>));</td></tr>
<tr><th id="104">104</th><td>        });</td></tr>
<tr><th id="105">105</th><td><u>#<span data-ppcond="105">if</span> <span class="macro" title="140" data-ref="_M/TVM_LLVM_VERSION">TVM_LLVM_VERSION</span> &gt;= 110</u></td></tr>
<tr><th id="106">106</th><td>        <em>auto</em> <dfn class="local col4 decl" id="14alignment" title='alignment' data-type='unsigned int' data-ref="14alignment" data-ref-filename="14alignment">alignment</dfn> = <b>static_cast</b>&lt;<em>unsigned</em>&gt;(<a class="local col2 ref" href="#12alloca" title='alloca' data-ref="12alloca" data-ref-filename="12alloca">alloca</a>-&gt;<span class='ref fn' title='llvm::AllocaInst::getAlign' data-ref="_ZNK4llvm10AllocaInst8getAlignEv" data-ref-filename="_ZNK4llvm10AllocaInst8getAlignEv">getAlign</span>().<span class='ref fn' title='llvm::Align::value' data-ref="_ZNK4llvm5Align5valueEv" data-ref-filename="_ZNK4llvm5Align5valueEv">value</span>());</td></tr>
<tr><th id="107">107</th><td><u>#<span data-ppcond="105">else</span></u></td></tr>
<tr><th id="108">108</th><td>        <em>unsigned</em> alignment = alloca-&gt;getAlignment();</td></tr>
<tr><th id="109">109</th><td><u>#<span data-ppcond="105">endif</span></u></td></tr>
<tr><th id="110">110</th><td>        <b>if</b> (<a class="local col4 ref" href="#14alignment" title='alignment' data-ref="14alignment" data-ref-filename="14alignment">alignment</a> &lt; <b>static_cast</b>&lt;<em>unsigned</em>&gt;(<a class="local col9 ref" href="#9info" title='info' data-ref="9info" data-ref-filename="9info">info</a>.<a class="ref field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::StorageInfo::alignment" title='tvm::codegen::CodeGenLLVM::StorageInfo::alignment' data-ref="tvm::codegen::CodeGenLLVM::StorageInfo::alignment" data-ref-filename="tvm..codegen..CodeGenLLVM..StorageInfo..alignment">alignment</a>)) {</td></tr>
<tr><th id="111">111</th><td><u>#<span data-ppcond="111">if</span> <span class="macro" title="140" data-ref="_M/TVM_LLVM_VERSION">TVM_LLVM_VERSION</span> &gt;= 100</u></td></tr>
<tr><th id="112">112</th><td>          <a class="local col2 ref" href="#12alloca" title='alloca' data-ref="12alloca" data-ref-filename="12alloca">alloca</a>-&gt;<span class='ref fn' title='llvm::AllocaInst::setAlignment' data-ref="_ZN4llvm10AllocaInst12setAlignmentENS_5AlignE" data-ref-filename="_ZN4llvm10AllocaInst12setAlignmentENS_5AlignE">setAlignment</span>(<span class="namespace">llvm::</span><span class='type' title='llvm::Align' data-ref="llvm::Align" data-ref-filename="llvm..Align">Align</span><span class='ref fn' title='llvm::Align::Align' data-ref="_ZN4llvm5AlignC1Em" data-ref-filename="_ZN4llvm5AlignC1Em">(</span><a class="local col9 ref" href="#9info" title='info' data-ref="9info" data-ref-filename="9info">info</a>.<a class="ref field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::StorageInfo::alignment" title='tvm::codegen::CodeGenLLVM::StorageInfo::alignment' data-ref="tvm::codegen::CodeGenLLVM::StorageInfo::alignment" data-ref-filename="tvm..codegen..CodeGenLLVM..StorageInfo..alignment">alignment</a>));</td></tr>
<tr><th id="113">113</th><td><u>#<span data-ppcond="111">else</span></u></td></tr>
<tr><th id="114">114</th><td>          alloca-&gt;setAlignment(info.alignment);</td></tr>
<tr><th id="115">115</th><td><u>#<span data-ppcond="111">endif</span></u></td></tr>
<tr><th id="116">116</th><td>        }</td></tr>
<tr><th id="117">117</th><td>        <a class="local col8 ref" href="#8buf" title='buf' data-ref="8buf" data-ref-filename="8buf">buf</a> = <a class="local col2 ref" href="#12alloca" title='alloca' data-ref="12alloca" data-ref-filename="12alloca">alloca</a>;</td></tr>
<tr><th id="118">118</th><td>      } <b>else</b> {</td></tr>
<tr><th id="119">119</th><td>        <a class="macro" href="../../../include/tvm/runtime/logging.h.html#680" title="if (!(storage_scope.rank == runtime::StorageRank::kShared)) ::tvm::runtime::detail::LogFatal(&quot;/home/runner/work/tvm-woboq/tvm-woboq/tvm/src/target/llvm/codegen_nvptx.cc&quot;, 119).stream() &lt;&lt; ::tvm::runtime::detail::kTVM_INTERNAL_ERROR_MESSAGE &lt;&lt; &quot;  &quot; &lt;&lt; &quot;Check failed: (&quot; &quot;storage_scope.rank == runtime::StorageRank::kShared&quot; &lt;&lt; &quot;) is false: &quot;" data-ref="_M/ICHECK">ICHECK</a>(<a class="local col0 ref" href="#10storage_scope" title='storage_scope' data-ref="10storage_scope" data-ref-filename="10storage_scope">storage_scope</a>.<a class="ref field" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::StorageScope::rank" title='tvm::runtime::StorageScope::rank' data-ref="tvm::runtime::StorageScope::rank" data-ref-filename="tvm..runtime..StorageScope..rank">rank</a> == runtime::<a class="type" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::StorageRank" title='tvm::runtime::StorageRank' data-ref="tvm::runtime::StorageRank" data-ref-filename="tvm..runtime..StorageRank">StorageRank</a>::<a class="enum" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::StorageRank::kShared" title='tvm::runtime::StorageRank::kShared' data-ref="tvm::runtime::StorageRank::kShared" data-ref-filename="tvm..runtime..StorageRank..kShared">kShared</a>)</td></tr>
<tr><th id="120">120</th><td>            <a class="ref fn" href="../../../../include/c++/10/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"Can only allocate shared or local memory inside kernel"</q>;</td></tr>
<tr><th id="121">121</th><td>        <a class="local col8 ref" href="#8buf" title='buf' data-ref="8buf" data-ref-filename="8buf">buf</a> = <a class="member fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM20AllocateSharedMemoryENS_7runtime8DataTypeEmjiN4llvm11GlobalValue12LinkageTypesE" title='tvm::codegen::CodeGenLLVM::AllocateSharedMemory' data-ref="_ZN3tvm7codegen11CodeGenLLVM20AllocateSharedMemoryENS_7runtime8DataTypeEmjiN4llvm11GlobalValue12LinkageTypesE" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM20AllocateSharedMemoryENS_7runtime8DataTypeEmjiN4llvm11GlobalValue12LinkageTypesE">AllocateSharedMemory</a>(<a class="ref fn fake" href="../../../include/tvm/runtime/data_type.h.html#41" title='tvm::runtime::DataType::DataType' data-ref="_ZN3tvm7runtime8DataTypeC1ERKS1_" data-ref-filename="_ZN3tvm7runtime8DataTypeC1ERKS1_"></a><a class="local col7 ref" href="#7op" title='op' data-ref="7op" data-ref-filename="7op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/stmt.h.html#tvm::tir::AllocateNode::dtype" title='tvm::tir::AllocateNode::dtype' data-ref="tvm::tir::AllocateNode::dtype" data-ref-filename="tvm..tir..AllocateNode..dtype">dtype</a>, <a class="local col1 ref" href="#11constant_size" title='constant_size' data-ref="11constant_size" data-ref-filename="11constant_size">constant_size</a>, <var>3</var>, <a class="local col9 ref" href="#9info" title='info' data-ref="9info" data-ref-filename="9info">info</a>.<a class="ref field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::StorageInfo::alignment" title='tvm::codegen::CodeGenLLVM::StorageInfo::alignment' data-ref="tvm::codegen::CodeGenLLVM::StorageInfo::alignment" data-ref-filename="tvm..codegen..CodeGenLLVM..StorageInfo..alignment">alignment</a>,</td></tr>
<tr><th id="122">122</th><td>                                   <span class="namespace">llvm::</span><span class='type' title='llvm::GlobalValue' data-ref="llvm::GlobalValue" data-ref-filename="llvm..GlobalValue">GlobalValue</span>::<span class='enum' title='llvm::GlobalValue::PrivateLinkage' data-ref="llvm::GlobalValue::PrivateLinkage" data-ref-filename="llvm..GlobalValue..PrivateLinkage">PrivateLinkage</span>);</td></tr>
<tr><th id="123">123</th><td>      }</td></tr>
<tr><th id="124">124</th><td>    }</td></tr>
<tr><th id="125">125</th><td></td></tr>
<tr><th id="126">126</th><td>    <a class="local col8 ref" href="#8buf" title='buf' data-ref="8buf" data-ref-filename="8buf">buf</a> = <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::builder_" title='tvm::codegen::CodeGenLLVM::builder_' data-ref="tvm::codegen::CodeGenLLVM::builder_" data-ref-filename="tvm..codegen..CodeGenLLVM..builder_">builder_</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><span class='ref fn' title='llvm::IRBuilderBase::CreatePointerCast' data-ref="_ZN4llvm13IRBuilderBase17CreatePointerCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" data-ref-filename="_ZN4llvm13IRBuilderBase17CreatePointerCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreatePointerCast</span>(</td></tr>
<tr><th id="127">127</th><td>        <a class="local col8 ref" href="#8buf" title='buf' data-ref="8buf" data-ref-filename="8buf">buf</a>, <a class="member fn" href="codegen_llvm.h.html#_ZNK3tvm7codegen11CodeGenLLVM15DTypeToLLVMTypeERKNS_7runtime8DataTypeE" title='tvm::codegen::CodeGenLLVM::DTypeToLLVMType' data-ref="_ZNK3tvm7codegen11CodeGenLLVM15DTypeToLLVMTypeERKNS_7runtime8DataTypeE" data-ref-filename="_ZNK3tvm7codegen11CodeGenLLVM15DTypeToLLVMTypeERKNS_7runtime8DataTypeE">DTypeToLLVMType</a>(<a class="local col7 ref" href="#7op" title='op' data-ref="7op" data-ref-filename="7op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/stmt.h.html#tvm::tir::AllocateNode::dtype" title='tvm::tir::AllocateNode::dtype' data-ref="tvm::tir::AllocateNode::dtype" data-ref-filename="tvm..tir..AllocateNode..dtype">dtype</a>)-&gt;<span class='ref fn' title='llvm::Type::getPointerTo' data-ref="_ZNK4llvm4Type12getPointerToEj" data-ref-filename="_ZNK4llvm4Type12getPointerToEj">getPointerTo</span>(<a class="local col8 ref" href="#8buf" title='buf' data-ref="8buf" data-ref-filename="8buf">buf</a>-&gt;<span class='ref fn' title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</span>()-&gt;<span class='ref fn' title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv" data-ref-filename="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</span>()));</td></tr>
<tr><th id="128">128</th><td>    <a class="macro" href="../../../include/tvm/runtime/logging.h.html#680" title="if (!(!var_map_.count(op-&gt;buffer_var.get()))) ::tvm::runtime::detail::LogFatal(&quot;/home/runner/work/tvm-woboq/tvm-woboq/tvm/src/target/llvm/codegen_nvptx.cc&quot;, 128).stream() &lt;&lt; ::tvm::runtime::detail::kTVM_INTERNAL_ERROR_MESSAGE &lt;&lt; &quot;  &quot; &lt;&lt; &quot;Check failed: (&quot; &quot;!var_map_.count(op-&gt;buffer_var.get())&quot; &lt;&lt; &quot;) is false: &quot;" data-ref="_M/ICHECK">ICHECK</a>(!<a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::var_map_" title='tvm::codegen::CodeGenLLVM::var_map_' data-ref="tvm::codegen::CodeGenLLVM::var_map_" data-ref-filename="tvm..codegen..CodeGenLLVM..var_map_">var_map_</a>.<a class="ref fn" href="../../../../include/c++/10/bits/unordered_map.h.html#_ZNKSt13unordered_map5countERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashE1001767" title='std::unordered_map::count' data-ref="_ZNKSt13unordered_map5countERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashE1001767" data-ref-filename="_ZNKSt13unordered_map5countERKNSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashE1001767">count</a>(<a class="local col7 ref" href="#7op" title='op' data-ref="7op" data-ref-filename="7op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/stmt.h.html#tvm::tir::AllocateNode::buffer_var" title='tvm::tir::AllocateNode::buffer_var' data-ref="tvm::tir::AllocateNode::buffer_var" data-ref-filename="tvm..tir..AllocateNode..buffer_var">buffer_var</a>.<a class="ref fn" href="../../../include/tvm/tir/var.h.html#_ZNK3tvm3tir3Var3getEv" title='tvm::tir::Var::get' data-ref="_ZNK3tvm3tir3Var3getEv" data-ref-filename="_ZNK3tvm3tir3Var3getEv">get</a>()));</td></tr>
<tr><th id="129">129</th><td>    <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::var_map_" title='tvm::codegen::CodeGenLLVM::var_map_' data-ref="tvm::codegen::CodeGenLLVM::var_map_" data-ref-filename="tvm..codegen..CodeGenLLVM..var_map_">var_map_</a><a class="ref fn" href="../../../../include/c++/10/bits/unordered_map.h.html#_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" title='std::unordered_map::operator[]' data-ref="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368" data-ref-filename="_ZNSt13unordered_mapixEONSt10_HashtableIT_St4pairIKS1_T0_ET3_NSt8__detail10_Select1stET2_T1_NS7_18_Mod_range_hashingENS7_20_Default_ranged_hashENS7_2012426368">[<a class="local col7 ref" href="#7op" title='op' data-ref="7op" data-ref-filename="7op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/stmt.h.html#tvm::tir::AllocateNode::buffer_var" title='tvm::tir::AllocateNode::buffer_var' data-ref="tvm::tir::AllocateNode::buffer_var" data-ref-filename="tvm..tir..AllocateNode..buffer_var">buffer_var</a>.<a class="ref fn" href="../../../include/tvm/tir/var.h.html#_ZNK3tvm3tir3Var3getEv" title='tvm::tir::Var::get' data-ref="_ZNK3tvm3tir3Var3getEv" data-ref-filename="_ZNK3tvm3tir3Var3getEv">get</a>()]</a> = <a class="local col8 ref" href="#8buf" title='buf' data-ref="8buf" data-ref-filename="8buf">buf</a>;</td></tr>
<tr><th id="130">130</th><td>    <b>this</b>-&gt;<a class="virtual member fn" href="../../../include/tvm/tir/stmt_functor.h.html#_ZN3tvm3tir11StmtFunctorIFT_RKNS0_4StmtEDpT0_EE9VisitStmtES5_S7_" title='tvm::tir::StmtFunctor&lt;type-parameter-0-0 (const tvm::tir::Stmt &amp;, type-parameter-0-1...)&gt;::VisitStmt' data-ref="_ZN3tvm3tir11StmtFunctorIFT_RKNS0_4StmtEDpT0_EE9VisitStmtES5_S7_" data-ref-filename="_ZN3tvm3tir11StmtFunctorIFT_RKNS0_4StmtEDpT0_EE9VisitStmtES5_S7_">VisitStmt</a>(<a class="local col7 ref" href="#7op" title='op' data-ref="7op" data-ref-filename="7op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/stmt.h.html#tvm::tir::AllocateNode::body" title='tvm::tir::AllocateNode::body' data-ref="tvm::tir::AllocateNode::body" data-ref-filename="tvm..tir..AllocateNode..body">body</a>);</td></tr>
<tr><th id="131">131</th><td>  }</td></tr>
<tr><th id="132">132</th><td></td></tr>
<tr><th id="133">133</th><td>  <i>// Return the thread index via intrinsics.</i></td></tr>
<tr><th id="134">134</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</span>* <dfn class="virtual decl def fn" id="_ZN3tvm7codegen12CodeGenNVPTX14GetThreadIndexERKNS_3tir7IterVarE" title='tvm::codegen::CodeGenNVPTX::GetThreadIndex' data-ref="_ZN3tvm7codegen12CodeGenNVPTX14GetThreadIndexERKNS_3tir7IterVarE" data-ref-filename="_ZN3tvm7codegen12CodeGenNVPTX14GetThreadIndexERKNS_3tir7IterVarE">GetThreadIndex</dfn>(<em>const</em> <a class="type" href="../../../include/tvm/tir/var.h.html#tvm::tir::IterVar" title='tvm::tir::IterVar' data-ref="tvm::tir::IterVar" data-ref-filename="tvm..tir..IterVar">IterVar</a>&amp; <dfn class="local col5 decl" id="15iv" title='iv' data-type='const tvm::tir::IterVar &amp;' data-ref="15iv" data-ref-filename="15iv">iv</dfn>) final {</td></tr>
<tr><th id="135">135</th><td>    <span class="namespace">runtime::</span><a class="type" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::ThreadScope" title='tvm::runtime::ThreadScope' data-ref="tvm::runtime::ThreadScope" data-ref-filename="tvm..runtime..ThreadScope">ThreadScope</a> <dfn class="local col6 decl" id="16ts" title='ts' data-type='runtime::ThreadScope' data-ref="16ts" data-ref-filename="16ts">ts</dfn> = <span class="namespace">runtime::</span><a class="type" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::ThreadScope" title='tvm::runtime::ThreadScope' data-ref="tvm::runtime::ThreadScope" data-ref-filename="tvm..runtime..ThreadScope">ThreadScope</a>::<a class="ref fn" href="../../runtime/thread_storage_scope.h.html#_ZN3tvm7runtime11ThreadScope6CreateERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='tvm::runtime::ThreadScope::Create' data-ref="_ZN3tvm7runtime11ThreadScope6CreateERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" data-ref-filename="_ZN3tvm7runtime11ThreadScope6CreateERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE">Create</a>(<a class="ref fn fake" href="../../../include/tvm/runtime/container/string.h.html#_ZNK3tvm7runtime6StringcvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv" title='tvm::runtime::String::operator basic_string' data-ref="_ZNK3tvm7runtime6StringcvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv" data-ref-filename="_ZNK3tvm7runtime6StringcvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv"></a><a class="local col5 ref" href="#15iv" title='iv' data-ref="15iv" data-ref-filename="15iv">iv</a><a class="ref fn" href="../../../include/tvm/tir/var.h.html#310" title='tvm::tir::IterVar::operator-&gt;' data-ref="_ZNK3tvm3tir7IterVarptEv" data-ref-filename="_ZNK3tvm3tir7IterVarptEv">-&gt;</a><a class="ref field" href="../../../include/tvm/tir/var.h.html#tvm::tir::IterVarNode::thread_tag" title='tvm::tir::IterVarNode::thread_tag' data-ref="tvm::tir::IterVarNode::thread_tag" data-ref-filename="tvm..tir..IterVarNode..thread_tag">thread_tag</a>);</td></tr>
<tr><th id="136">136</th><td>    <span class="namespace">llvm::Intrinsic::</span><span class='typedef' title='llvm::Intrinsic::ID' data-type='unsigned int' data-ref="llvm::Intrinsic::ID" data-ref-filename="llvm..Intrinsic..ID">ID</span> <dfn class="local col7 decl" id="17intrin_id" title='intrin_id' data-type='llvm::Intrinsic::ID' data-ref="17intrin_id" data-ref-filename="17intrin_id">intrin_id</dfn> = <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_read_ptx_sreg_tid_x' data-ref="llvm::Intrinsic::nvvm_read_ptx_sreg_tid_x" data-ref-filename="llvm..Intrinsic..nvvm_read_ptx_sreg_tid_x">nvvm_read_ptx_sreg_tid_x</span>;</td></tr>
<tr><th id="137">137</th><td>    <b>if</b> (<a class="local col6 ref" href="#16ts" title='ts' data-ref="16ts" data-ref-filename="16ts">ts</a>.<a class="ref field" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::ThreadScope::rank" title='tvm::runtime::ThreadScope::rank' data-ref="tvm::runtime::ThreadScope::rank" data-ref-filename="tvm..runtime..ThreadScope..rank">rank</a> == <var>1</var>) {</td></tr>
<tr><th id="138">138</th><td>      <b>switch</b> (<a class="local col6 ref" href="#16ts" title='ts' data-ref="16ts" data-ref-filename="16ts">ts</a>.<a class="ref field" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::ThreadScope::dim_index" title='tvm::runtime::ThreadScope::dim_index' data-ref="tvm::runtime::ThreadScope::dim_index" data-ref-filename="tvm..runtime..ThreadScope..dim_index">dim_index</a>) {</td></tr>
<tr><th id="139">139</th><td>        <b>case</b> <var>0</var>:</td></tr>
<tr><th id="140">140</th><td>          <a class="local col7 ref" href="#17intrin_id" title='intrin_id' data-ref="17intrin_id" data-ref-filename="17intrin_id">intrin_id</a> = <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_read_ptx_sreg_tid_x' data-ref="llvm::Intrinsic::nvvm_read_ptx_sreg_tid_x" data-ref-filename="llvm..Intrinsic..nvvm_read_ptx_sreg_tid_x">nvvm_read_ptx_sreg_tid_x</span>;</td></tr>
<tr><th id="141">141</th><td>          <b>break</b>;</td></tr>
<tr><th id="142">142</th><td>        <b>case</b> <var>1</var>:</td></tr>
<tr><th id="143">143</th><td>          <a class="local col7 ref" href="#17intrin_id" title='intrin_id' data-ref="17intrin_id" data-ref-filename="17intrin_id">intrin_id</a> = <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_read_ptx_sreg_tid_y' data-ref="llvm::Intrinsic::nvvm_read_ptx_sreg_tid_y" data-ref-filename="llvm..Intrinsic..nvvm_read_ptx_sreg_tid_y">nvvm_read_ptx_sreg_tid_y</span>;</td></tr>
<tr><th id="144">144</th><td>          <b>break</b>;</td></tr>
<tr><th id="145">145</th><td>        <b>case</b> <var>2</var>:</td></tr>
<tr><th id="146">146</th><td>          <a class="local col7 ref" href="#17intrin_id" title='intrin_id' data-ref="17intrin_id" data-ref-filename="17intrin_id">intrin_id</a> = <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_read_ptx_sreg_tid_z' data-ref="llvm::Intrinsic::nvvm_read_ptx_sreg_tid_z" data-ref-filename="llvm..Intrinsic..nvvm_read_ptx_sreg_tid_z">nvvm_read_ptx_sreg_tid_z</span>;</td></tr>
<tr><th id="147">147</th><td>          <b>break</b>;</td></tr>
<tr><th id="148">148</th><td>        <b>default</b>:</td></tr>
<tr><th id="149">149</th><td>          <a class="macro" href="../../../include/tvm/runtime/logging.h.html#571" title="::tvm::runtime::detail::LogFatal(&quot;/home/runner/work/tvm-woboq/tvm-woboq/tvm/src/target/llvm/codegen_nvptx.cc&quot;, 149).stream()" data-ref="_M/LOG">LOG</a>(FATAL) <a class="ref fn" href="../../../../include/c++/10/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"unknown thread idx"</q>;</td></tr>
<tr><th id="150">150</th><td>      }</td></tr>
<tr><th id="151">151</th><td>    } <b>else</b> {</td></tr>
<tr><th id="152">152</th><td>      <a class="macro" href="../../../include/tvm/runtime/logging.h.html#690" title="if (auto __tvm__log__err = ::tvm::runtime::detail::LogCheck_EQ(ts.rank, 0)) ::tvm::runtime::detail::LogFatal(&quot;/home/runner/work/tvm-woboq/tvm-woboq/tvm/src/target/llvm/codegen_nvptx.cc&quot;, 152).stream() &lt;&lt; ::tvm::runtime::detail::kTVM_INTERNAL_ERROR_MESSAGE &lt;&lt; std::endl &lt;&lt; &quot;  &quot; &lt;&lt; &quot;Check failed: &quot; &lt;&lt; &quot;ts.rank&quot; &quot; &quot; &quot;==&quot; &quot; &quot; &quot;0&quot; &lt;&lt; *__tvm__log__err &lt;&lt; &quot;: &quot;" data-ref="_M/ICHECK_EQ">ICHECK_EQ</a>(<a class="local col6 ref" href="#16ts" title='ts' data-ref="16ts" data-ref-filename="16ts">ts</a>.<a class="ref field" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::ThreadScope::rank" title='tvm::runtime::ThreadScope::rank' data-ref="tvm::runtime::ThreadScope::rank" data-ref-filename="tvm..runtime..ThreadScope..rank">rank</a>, <var>0</var>);</td></tr>
<tr><th id="153">153</th><td>      <b>switch</b> (<a class="local col6 ref" href="#16ts" title='ts' data-ref="16ts" data-ref-filename="16ts">ts</a>.<a class="ref field" href="../../runtime/thread_storage_scope.h.html#tvm::runtime::ThreadScope::dim_index" title='tvm::runtime::ThreadScope::dim_index' data-ref="tvm::runtime::ThreadScope::dim_index" data-ref-filename="tvm..runtime..ThreadScope..dim_index">dim_index</a>) {</td></tr>
<tr><th id="154">154</th><td>        <b>case</b> <var>0</var>:</td></tr>
<tr><th id="155">155</th><td>          <a class="local col7 ref" href="#17intrin_id" title='intrin_id' data-ref="17intrin_id" data-ref-filename="17intrin_id">intrin_id</a> = <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_read_ptx_sreg_ctaid_x' data-ref="llvm::Intrinsic::nvvm_read_ptx_sreg_ctaid_x" data-ref-filename="llvm..Intrinsic..nvvm_read_ptx_sreg_ctaid_x">nvvm_read_ptx_sreg_ctaid_x</span>;</td></tr>
<tr><th id="156">156</th><td>          <b>break</b>;</td></tr>
<tr><th id="157">157</th><td>        <b>case</b> <var>1</var>:</td></tr>
<tr><th id="158">158</th><td>          <a class="local col7 ref" href="#17intrin_id" title='intrin_id' data-ref="17intrin_id" data-ref-filename="17intrin_id">intrin_id</a> = <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_read_ptx_sreg_ctaid_y' data-ref="llvm::Intrinsic::nvvm_read_ptx_sreg_ctaid_y" data-ref-filename="llvm..Intrinsic..nvvm_read_ptx_sreg_ctaid_y">nvvm_read_ptx_sreg_ctaid_y</span>;</td></tr>
<tr><th id="159">159</th><td>          <b>break</b>;</td></tr>
<tr><th id="160">160</th><td>        <b>case</b> <var>2</var>:</td></tr>
<tr><th id="161">161</th><td>          <a class="local col7 ref" href="#17intrin_id" title='intrin_id' data-ref="17intrin_id" data-ref-filename="17intrin_id">intrin_id</a> = <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_read_ptx_sreg_ctaid_z' data-ref="llvm::Intrinsic::nvvm_read_ptx_sreg_ctaid_z" data-ref-filename="llvm..Intrinsic..nvvm_read_ptx_sreg_ctaid_z">nvvm_read_ptx_sreg_ctaid_z</span>;</td></tr>
<tr><th id="162">162</th><td>          <b>break</b>;</td></tr>
<tr><th id="163">163</th><td>        <b>default</b>:</td></tr>
<tr><th id="164">164</th><td>          <a class="macro" href="../../../include/tvm/runtime/logging.h.html#571" title="::tvm::runtime::detail::LogFatal(&quot;/home/runner/work/tvm-woboq/tvm-woboq/tvm/src/target/llvm/codegen_nvptx.cc&quot;, 164).stream()" data-ref="_M/LOG">LOG</a>(FATAL) <a class="ref fn" href="../../../../include/c++/10/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"unknown thread idx"</q>;</td></tr>
<tr><th id="165">165</th><td>      }</td></tr>
<tr><th id="166">166</th><td>    }</td></tr>
<tr><th id="167">167</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function" data-ref-filename="llvm..Function">Function</span>* <dfn class="local col8 decl" id="18f" title='f' data-type='llvm::Function *' data-ref="18f" data-ref-filename="18f">f</dfn> = <span class="namespace">llvm::Intrinsic::</span><span class='ref fn' title='llvm::Intrinsic::getDeclaration' data-ref="_ZN4llvm9Intrinsic14getDeclarationEPNS_6ModuleEjNS_8ArrayRefIPNS_4TypeEEE" data-ref-filename="_ZN4llvm9Intrinsic14getDeclarationEPNS_6ModuleEjNS_8ArrayRefIPNS_4TypeEEE">getDeclaration</span>(<a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::module_" title='tvm::codegen::CodeGenLLVM::module_' data-ref="tvm::codegen::CodeGenLLVM::module_" data-ref-filename="tvm..codegen..CodeGenLLVM..module_">module_</a>.<a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptr3getEv" title='std::unique_ptr::get' data-ref="_ZNKSt10unique_ptr3getEv" data-ref-filename="_ZNKSt10unique_ptr3getEv">get</a>(), <a class="local col7 ref" href="#17intrin_id" title='intrin_id' data-ref="17intrin_id" data-ref-filename="17intrin_id">intrin_id</a>);</td></tr>
<tr><th id="168">168</th><td>    <b>return</b> <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::builder_" title='tvm::codegen::CodeGenLLVM::builder_' data-ref="tvm::codegen::CodeGenLLVM::builder_" data-ref-filename="tvm..codegen..CodeGenLLVM..builder_">builder_</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><span class='ref fn' title='llvm::IRBuilderBase::CreateCall' data-ref="_ZN4llvm13IRBuilderBase10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE" data-ref-filename="_ZN4llvm13IRBuilderBase10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(<span class='ref fn fake' title='llvm::FunctionCallee::FunctionCallee' data-ref="_ZN4llvm14FunctionCalleeC1EPT_" data-ref-filename="_ZN4llvm14FunctionCalleeC1EPT_"></span><a class="local col8 ref" href="#18f" title='f' data-ref="18f" data-ref-filename="18f">f</a>, <span class='ref fn' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1Ev" data-ref-filename="_ZN4llvm8ArrayRefC1Ev">{</span>});</td></tr>
<tr><th id="169">169</th><td>  }</td></tr>
<tr><th id="170">170</th><td></td></tr>
<tr><th id="171">171</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</span>* <dfn class="virtual decl def fn" id="_ZN3tvm7codegen12CodeGenNVPTX17CreateStorageSyncEPKNS_3tir8CallNodeE" title='tvm::codegen::CodeGenNVPTX::CreateStorageSync' data-ref="_ZN3tvm7codegen12CodeGenNVPTX17CreateStorageSyncEPKNS_3tir8CallNodeE" data-ref-filename="_ZN3tvm7codegen12CodeGenNVPTX17CreateStorageSyncEPKNS_3tir8CallNodeE">CreateStorageSync</dfn>(<em>const</em> <a class="type" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode" title='tvm::tir::CallNode' data-ref="tvm::tir::CallNode" data-ref-filename="tvm..tir..CallNode">CallNode</a>* <dfn class="local col9 decl" id="19op" title='op' data-type='const tvm::tir::CallNode *' data-ref="19op" data-ref-filename="19op">op</dfn>) final {</td></tr>
<tr><th id="172">172</th><td>    <em>const</em> <span class="namespace">std::</span><a class="typedef" href="../../../../include/c++/10/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</a>&amp; <dfn class="local col0 decl" id="20sync" title='sync' data-type='const std::string &amp;' data-ref="20sync" data-ref-filename="20sync">sync</dfn> = <a class="ref fn fake" href="../../../include/tvm/runtime/container/string.h.html#_ZNK3tvm7runtime6StringcvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv" title='tvm::runtime::String::operator basic_string' data-ref="_ZNK3tvm7runtime6StringcvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv" data-ref-filename="_ZNK3tvm7runtime6StringcvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv"></a><a class="local col9 ref" href="#19op" title='op' data-ref="19op" data-ref-filename="19op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode::args" title='tvm::tir::CallNode::args' data-ref="tvm::tir::CallNode::args" data-ref-filename="tvm..tir..CallNode..args">args</a><a class="ref fn" href="../../../include/tvm/runtime/container/array.h.html#_ZNK3tvm7runtime5ArrayixEl" title='tvm::runtime::Array::operator[]' data-ref="_ZNK3tvm7runtime5ArrayixEl" data-ref-filename="_ZNK3tvm7runtime5ArrayixEl">[<var>0</var>]</a>.<a class="ref fn" href="../../../include/tvm/runtime/object.h.html#_ZNK3tvm7runtime9ObjectRef2asEv" title='tvm::runtime::ObjectRef::as' data-ref="_ZNK3tvm7runtime9ObjectRef2asEv" data-ref-filename="_ZNK3tvm7runtime9ObjectRef2asEv">as</a>&lt;<a class="type" href="../../../include/tvm/tir/expr.h.html#tvm::tir::StringImmNode" title='tvm::tir::StringImmNode' data-ref="tvm::tir::StringImmNode" data-ref-filename="tvm..tir..StringImmNode">StringImmNode</a>&gt;()-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::StringImmNode::value" title='tvm::tir::StringImmNode::value' data-ref="tvm::tir::StringImmNode::value" data-ref-filename="tvm..tir..StringImmNode..value">value</a>;</td></tr>
<tr><th id="173">173</th><td>    <b>if</b> (<a class="local col0 ref" href="#20sync" title='sync' data-ref="20sync" data-ref-filename="20sync">sync</a> <a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZSteqRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" title='std::operator==' data-ref="_ZSteqRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZSteqRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_">==</a> <q>"warp"</q>) {</td></tr>
<tr><th id="174">174</th><td>      <i>// TODO(tqchen) warp sync in CUDA9</i></td></tr>
<tr><th id="175">175</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="176">176</th><td>    } <b>else</b> <b>if</b> (<a class="local col0 ref" href="#20sync" title='sync' data-ref="20sync" data-ref-filename="20sync">sync</a> <a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZSteqRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" title='std::operator==' data-ref="_ZSteqRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZSteqRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_">==</a> <q>"shared"</q> || <a class="local col0 ref" href="#20sync" title='sync' data-ref="20sync" data-ref-filename="20sync">sync</a> <a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZSteqRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" title='std::operator==' data-ref="_ZSteqRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZSteqRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_">==</a> <q>"shared.dyn"</q>) {</td></tr>
<tr><th id="177">177</th><td>      <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function" data-ref-filename="llvm..Function">Function</span>* <dfn class="local col1 decl" id="21f" title='f' data-type='llvm::Function *' data-ref="21f" data-ref-filename="21f">f</dfn> =</td></tr>
<tr><th id="178">178</th><td>          <span class="namespace">llvm::Intrinsic::</span><span class='ref fn' title='llvm::Intrinsic::getDeclaration' data-ref="_ZN4llvm9Intrinsic14getDeclarationEPNS_6ModuleEjNS_8ArrayRefIPNS_4TypeEEE" data-ref-filename="_ZN4llvm9Intrinsic14getDeclarationEPNS_6ModuleEjNS_8ArrayRefIPNS_4TypeEEE">getDeclaration</span>(<a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::module_" title='tvm::codegen::CodeGenLLVM::module_' data-ref="tvm::codegen::CodeGenLLVM::module_" data-ref-filename="tvm..codegen..CodeGenLLVM..module_">module_</a>.<a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptr3getEv" title='std::unique_ptr::get' data-ref="_ZNKSt10unique_ptr3getEv" data-ref-filename="_ZNKSt10unique_ptr3getEv">get</a>(), <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_barrier0' data-ref="llvm::Intrinsic::nvvm_barrier0" data-ref-filename="llvm..Intrinsic..nvvm_barrier0">nvvm_barrier0</span>);</td></tr>
<tr><th id="179">179</th><td>      <b>return</b> <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::builder_" title='tvm::codegen::CodeGenLLVM::builder_' data-ref="tvm::codegen::CodeGenLLVM::builder_" data-ref-filename="tvm..codegen..CodeGenLLVM..builder_">builder_</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><span class='ref fn' title='llvm::IRBuilderBase::CreateCall' data-ref="_ZN4llvm13IRBuilderBase10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE" data-ref-filename="_ZN4llvm13IRBuilderBase10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(<span class='ref fn fake' title='llvm::FunctionCallee::FunctionCallee' data-ref="_ZN4llvm14FunctionCalleeC1EPT_" data-ref-filename="_ZN4llvm14FunctionCalleeC1EPT_"></span><a class="local col1 ref" href="#21f" title='f' data-ref="21f" data-ref-filename="21f">f</a>, <span class='ref fn' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1Ev" data-ref-filename="_ZN4llvm8ArrayRefC1Ev">{</span>});</td></tr>
<tr><th id="180">180</th><td>    } <b>else</b> {</td></tr>
<tr><th id="181">181</th><td>      <a class="macro" href="../../../include/tvm/runtime/logging.h.html#571" title="::tvm::runtime::detail::LogFatal(&quot;/home/runner/work/tvm-woboq/tvm-woboq/tvm/src/target/llvm/codegen_nvptx.cc&quot;, 181).stream()" data-ref="_M/LOG">LOG</a>(FATAL) <a class="ref fn" href="../../../../include/c++/10/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"Do not support sync "</q> <a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE" data-ref-filename="_ZStlsRSt13basic_ostreamIT_T0_ERKNSt7__cxx1112basic_stringIS0_S1_T1_EE">&lt;&lt;</a> <a class="local col0 ref" href="#20sync" title='sync' data-ref="20sync" data-ref-filename="20sync">sync</a>;</td></tr>
<tr><th id="182">182</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="183">183</th><td>    }</td></tr>
<tr><th id="184">184</th><td>  }</td></tr>
<tr><th id="185">185</th><td></td></tr>
<tr><th id="186">186</th><td>  <em>void</em> <dfn class="virtual decl def fn" id="_ZN3tvm7codegen12CodeGenNVPTX22InitPassManagerBuilderEPN4llvm18PassManagerBuilderE" title='tvm::codegen::CodeGenNVPTX::InitPassManagerBuilder' data-ref="_ZN3tvm7codegen12CodeGenNVPTX22InitPassManagerBuilderEPN4llvm18PassManagerBuilderE" data-ref-filename="_ZN3tvm7codegen12CodeGenNVPTX22InitPassManagerBuilderEPN4llvm18PassManagerBuilderE">InitPassManagerBuilder</dfn>(<span class="namespace">llvm::</span><span class='type' title='llvm::PassManagerBuilder' data-ref="llvm::PassManagerBuilder" data-ref-filename="llvm..PassManagerBuilder">PassManagerBuilder</span>* <dfn class="local col2 decl" id="22builder" title='builder' data-type='llvm::PassManagerBuilder *' data-ref="22builder" data-ref-filename="22builder">builder</dfn>) final {</td></tr>
<tr><th id="187">187</th><td>    <i>// Additional optimization hook to tweak the builder.</i></td></tr>
<tr><th id="188">188</th><td>  }</td></tr>
<tr><th id="189">189</th><td></td></tr>
<tr><th id="190">190</th><td>  <em>void</em> <dfn class="virtual decl def fn" id="_ZN3tvm7codegen12CodeGenNVPTX8OptimizeEv" title='tvm::codegen::CodeGenNVPTX::Optimize' data-ref="_ZN3tvm7codegen12CodeGenNVPTX8OptimizeEv" data-ref-filename="_ZN3tvm7codegen12CodeGenNVPTX8OptimizeEv">Optimize</dfn>() final {</td></tr>
<tr><th id="191">191</th><td>    <b>for</b> (<em>auto</em>&amp; <dfn class="local col3 decl" id="23f" title='f' data-type='llvm::Function &amp;' data-ref="23f" data-ref-filename="23f">f</dfn> : <a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrdeEv" title='std::unique_ptr::operator*' data-ref="_ZNKSt10unique_ptrdeEv" data-ref-filename="_ZNKSt10unique_ptrdeEv">*</a><a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::module_" title='tvm::codegen::CodeGenLLVM::module_' data-ref="tvm::codegen::CodeGenLLVM::module_" data-ref-filename="tvm..codegen..CodeGenLLVM..module_">module_</a>) {</td></tr>
<tr><th id="192">192</th><td>      <em>auto</em> <dfn class="local col4 decl" id="24fname" title='fname' data-type='std::string' data-ref="24fname" data-ref-filename="24fname">fname</dfn> = <a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1ERKTL0__RKT1_" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1ERKTL0__RKT1_" data-ref-filename="_ZNSt7__cxx1112basic_stringC1ERKTL0__RKT1_"><b>static_cast</b></a>&lt;<span class="namespace">std::</span><a class="typedef" href="../../../../include/c++/10/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</a>&gt;(<a class="local col3 ref" href="#23f" title='f' data-ref="23f" data-ref-filename="23f">f</a>.<span class='ref fn' title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv" data-ref-filename="_ZNK4llvm5Value7getNameEv">getName</span>());</td></tr>
<tr><th id="193">193</th><td>      <b>if</b> (<a class="local col4 ref" href="#24fname" title='fname' data-ref="24fname" data-ref-filename="24fname">fname</a>.<a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string6substrEN9__gnu_cxx14__alloc_traitsINS2_IT1_NS3_10value_typeEE6rebindIT_E5otherENS8_5other10value_typeEE9size_typeESC_" title='std::basic_string::substr' data-ref="_ZNKSt7__cxx1112basic_string6substrEN9__gnu_cxx14__alloc_traitsINS2_IT1_NS3_10value_typeEE6rebindIT_E5otherENS8_5other10value_typeEE9size_typeESC_" data-ref-filename="_ZNKSt7__cxx1112basic_string6substrEN9__gnu_cxx14__alloc_traitsINS2_IT1_NS3_10value_typeEE6rebindIT_E5otherENS8_5other10value_typeEE9size_typeESC_">substr</a>(<var>0</var>, <var>4</var>) <a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZStneRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" title='std::operator!=' data-ref="_ZStneRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_" data-ref-filename="_ZStneRKNSt7__cxx1112basic_stringIT_T0_T1_EEPKS1_">!=</a> <q>"__nv"</q>) <b>continue</b>;</td></tr>
<tr><th id="194">194</th><td>      <i>// This is to strip off unused __nv_* functions from the final module</i></td></tr>
<tr><th id="195">195</th><td><i>      // The one that is actually used will be inlined at call site</i></td></tr>
<tr><th id="196">196</th><td><i>      // Adapted from Halide's runtime linker</i></td></tr>
<tr><th id="197">197</th><td>      <b>if</b> (!<a class="local col3 ref" href="#23f" title='f' data-ref="23f" data-ref-filename="23f">f</a>.<span class='ref fn' title='llvm::GlobalValue::isDeclaration' data-ref="_ZNK4llvm11GlobalValue13isDeclarationEv" data-ref-filename="_ZNK4llvm11GlobalValue13isDeclarationEv">isDeclaration</span>() &amp;&amp; !<a class="local col3 ref" href="#23f" title='f' data-ref="23f" data-ref-filename="23f">f</a>.<span class='ref fn' title='llvm::Function::hasFnAttribute' data-ref="_ZNK4llvm8Function14hasFnAttributeENS_9Attribute8AttrKindE" data-ref-filename="_ZNK4llvm8Function14hasFnAttributeENS_9Attribute8AttrKindE">hasFnAttribute</span>(<span class="namespace">llvm::</span><span class='type' title='llvm::Attribute' data-ref="llvm::Attribute" data-ref-filename="llvm..Attribute">Attribute</span>::<span class='enum' title='llvm::Attribute::NoInline' data-ref="llvm::Attribute::NoInline" data-ref-filename="llvm..Attribute..NoInline">NoInline</span>)) {</td></tr>
<tr><th id="198">198</th><td>        <a class="local col3 ref" href="#23f" title='f' data-ref="23f" data-ref-filename="23f">f</a>.<span class='ref fn' title='llvm::GlobalValue::setLinkage' data-ref="_ZN4llvm11GlobalValue10setLinkageENS0_12LinkageTypesE" data-ref-filename="_ZN4llvm11GlobalValue10setLinkageENS0_12LinkageTypesE">setLinkage</span>(<span class="namespace">llvm::</span><span class='type' title='llvm::GlobalValue' data-ref="llvm::GlobalValue" data-ref-filename="llvm..GlobalValue">GlobalValue</span>::<span class='enum' title='llvm::GlobalValue::AvailableExternallyLinkage' data-ref="llvm::GlobalValue::AvailableExternallyLinkage" data-ref-filename="llvm..GlobalValue..AvailableExternallyLinkage">AvailableExternallyLinkage</span>);</td></tr>
<tr><th id="199">199</th><td>      }</td></tr>
<tr><th id="200">200</th><td>    }</td></tr>
<tr><th id="201">201</th><td>    <a class="type" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM" title='tvm::codegen::CodeGenLLVM' data-ref="tvm::codegen::CodeGenLLVM" data-ref-filename="tvm..codegen..CodeGenLLVM">CodeGenLLVM</a>::<a class="virtual member fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM8OptimizeEv" title='tvm::codegen::CodeGenLLVM::Optimize' data-ref="_ZN3tvm7codegen11CodeGenLLVM8OptimizeEv" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM8OptimizeEv">Optimize</a>();</td></tr>
<tr><th id="202">202</th><td>  }</td></tr>
<tr><th id="203">203</th><td></td></tr>
<tr><th id="204">204</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</span>* <a class="virtual decl fn" href="#_ZN3tvm7codegen12CodeGenNVPTX15CreateIntrinsicEPKNS_3tir8CallNodeE" title='tvm::codegen::CodeGenNVPTX::CreateIntrinsic' data-ref="_ZN3tvm7codegen12CodeGenNVPTX15CreateIntrinsicEPKNS_3tir8CallNodeE" data-ref-filename="_ZN3tvm7codegen12CodeGenNVPTX15CreateIntrinsicEPKNS_3tir8CallNodeE">CreateIntrinsic</a>(<em>const</em> <a class="type" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode" title='tvm::tir::CallNode' data-ref="tvm::tir::CallNode" data-ref-filename="tvm..tir..CallNode">CallNode</a>* <dfn class="local col5 decl" id="25op" title='op' data-type='const tvm::tir::CallNode *' data-ref="25op" data-ref-filename="25op">op</dfn>) override;</td></tr>
<tr><th id="205">205</th><td></td></tr>
<tr><th id="206">206</th><td> <b>protected</b>:</td></tr>
<tr><th id="207">207</th><td>  <em>void</em> <dfn class="virtual decl def fn" id="_ZN3tvm7codegen12CodeGenNVPTX10InitTargetEv" title='tvm::codegen::CodeGenNVPTX::InitTarget' data-ref="_ZN3tvm7codegen12CodeGenNVPTX10InitTargetEv" data-ref-filename="_ZN3tvm7codegen12CodeGenNVPTX10InitTargetEv">InitTarget</dfn>() final {</td></tr>
<tr><th id="208">208</th><td>    <i>// Maximum vector lane = float4</i></td></tr>
<tr><th id="209">209</th><td>    <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::native_vector_bits_" title='tvm::codegen::CodeGenLLVM::native_vector_bits_' data-ref="tvm::codegen::CodeGenLLVM::native_vector_bits_" data-ref-filename="tvm..codegen..CodeGenLLVM..native_vector_bits_">native_vector_bits_</a> = <var>4</var> * <var>32</var>;</td></tr>
<tr><th id="210">210</th><td>    <a class="type" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM" title='tvm::codegen::CodeGenLLVM' data-ref="tvm::codegen::CodeGenLLVM" data-ref-filename="tvm..codegen..CodeGenLLVM">CodeGenLLVM</a>::<a class="virtual member fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM10InitTargetEv" title='tvm::codegen::CodeGenLLVM::InitTarget' data-ref="_ZN3tvm7codegen11CodeGenLLVM10InitTargetEv" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM10InitTargetEv">InitTarget</a>();</td></tr>
<tr><th id="211">211</th><td>  }</td></tr>
<tr><th id="212">212</th><td>};</td></tr>
<tr><th id="213">213</th><td></td></tr>
<tr><th id="214">214</th><td><i  data-doc="_ZN3tvm7codegenL23GetWarpShuffleIntrinsicEPKNS_3tir8CallNodeEPj">// Check if this is a warp shuffle intrinsic call and match its</i></td></tr>
<tr><th id="215">215</th><td><i  data-doc="_ZN3tvm7codegenL23GetWarpShuffleIntrinsicEPKNS_3tir8CallNodeEPj">// corresponding nvvm intrinsic. Return true if the match is successful.</i></td></tr>
<tr><th id="216">216</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def fn" id="_ZN3tvm7codegenL23GetWarpShuffleIntrinsicEPKNS_3tir8CallNodeEPj" title='tvm::codegen::GetWarpShuffleIntrinsic' data-type='bool tvm::codegen::GetWarpShuffleIntrinsic(const tvm::tir::CallNode * op, llvm::Intrinsic::ID * id)' data-ref="_ZN3tvm7codegenL23GetWarpShuffleIntrinsicEPKNS_3tir8CallNodeEPj" data-ref-filename="_ZN3tvm7codegenL23GetWarpShuffleIntrinsicEPKNS_3tir8CallNodeEPj">GetWarpShuffleIntrinsic</dfn>(<em>const</em> <a class="type" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode" title='tvm::tir::CallNode' data-ref="tvm::tir::CallNode" data-ref-filename="tvm..tir..CallNode">CallNode</a>* <dfn class="local col6 decl" id="26op" title='op' data-type='const tvm::tir::CallNode *' data-ref="26op" data-ref-filename="26op">op</dfn>, <span class="namespace">llvm::Intrinsic::</span><span class='typedef' title='llvm::Intrinsic::ID' data-type='unsigned int' data-ref="llvm::Intrinsic::ID" data-ref-filename="llvm..Intrinsic..ID">ID</span>* <dfn class="local col7 decl" id="27id" title='id' data-type='llvm::Intrinsic::ID *' data-ref="27id" data-ref-filename="27id">id</dfn>) {</td></tr>
<tr><th id="217">217</th><td>  <i>// Only 32 bit data type is supported.</i></td></tr>
<tr><th id="218">218</th><td>  <b>if</b> (<a class="local col6 ref" href="#26op" title='op' data-ref="26op" data-ref-filename="26op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/ir/expr.h.html#tvm::PrimExprNode::dtype" title='tvm::PrimExprNode::dtype' data-ref="tvm::PrimExprNode::dtype" data-ref-filename="tvm..PrimExprNode..dtype">dtype</a>.<a class="ref fn" href="../../../include/tvm/runtime/data_type.h.html#_ZNK3tvm7runtime8DataType9is_vectorEv" title='tvm::runtime::DataType::is_vector' data-ref="_ZNK3tvm7runtime8DataType9is_vectorEv" data-ref-filename="_ZNK3tvm7runtime8DataType9is_vectorEv">is_vector</a>() || <a class="local col6 ref" href="#26op" title='op' data-ref="26op" data-ref-filename="26op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/ir/expr.h.html#tvm::PrimExprNode::dtype" title='tvm::PrimExprNode::dtype' data-ref="tvm::PrimExprNode::dtype" data-ref-filename="tvm..PrimExprNode..dtype">dtype</a>.<a class="ref fn" href="../../../include/tvm/runtime/data_type.h.html#_ZNK3tvm7runtime8DataType4bitsEv" title='tvm::runtime::DataType::bits' data-ref="_ZNK3tvm7runtime8DataType4bitsEv" data-ref-filename="_ZNK3tvm7runtime8DataType4bitsEv">bits</a>() != <var>32</var>) {</td></tr>
<tr><th id="219">219</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="220">220</th><td>  }</td></tr>
<tr><th id="221">221</th><td></td></tr>
<tr><th id="222">222</th><td>  <i>// Intrinsic lookup table.</i></td></tr>
<tr><th id="223">223</th><td><i>  // It is difficult to emit _sync verion that works on Pascal.</i></td></tr>
<tr><th id="224">224</th><td><i>  // We ignore the mask and only emit the non-sync version for nvptx.</i></td></tr>
<tr><th id="225">225</th><td>  <span class="namespace">llvm::Intrinsic::</span><span class='typedef' title='llvm::Intrinsic::ID' data-type='unsigned int' data-ref="llvm::Intrinsic::ID" data-ref-filename="llvm..Intrinsic..ID">ID</span> <dfn class="local col8 decl" id="28ids" title='ids' data-type='llvm::Intrinsic::ID[6]' data-ref="28ids" data-ref-filename="28ids">ids</dfn>[] = {</td></tr>
<tr><th id="226">226</th><td>      <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_shfl_idx_i32' data-ref="llvm::Intrinsic::nvvm_shfl_idx_i32" data-ref-filename="llvm..Intrinsic..nvvm_shfl_idx_i32">nvvm_shfl_idx_i32</span>,  <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_shfl_idx_f32' data-ref="llvm::Intrinsic::nvvm_shfl_idx_f32" data-ref-filename="llvm..Intrinsic..nvvm_shfl_idx_f32">nvvm_shfl_idx_f32</span>,</td></tr>
<tr><th id="227">227</th><td>      <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_shfl_up_i32' data-ref="llvm::Intrinsic::nvvm_shfl_up_i32" data-ref-filename="llvm..Intrinsic..nvvm_shfl_up_i32">nvvm_shfl_up_i32</span>,   <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_shfl_up_f32' data-ref="llvm::Intrinsic::nvvm_shfl_up_f32" data-ref-filename="llvm..Intrinsic..nvvm_shfl_up_f32">nvvm_shfl_up_f32</span>,</td></tr>
<tr><th id="228">228</th><td>      <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_shfl_down_i32' data-ref="llvm::Intrinsic::nvvm_shfl_down_i32" data-ref-filename="llvm..Intrinsic..nvvm_shfl_down_i32">nvvm_shfl_down_i32</span>, <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::nvvm_shfl_down_f32' data-ref="llvm::Intrinsic::nvvm_shfl_down_f32" data-ref-filename="llvm..Intrinsic..nvvm_shfl_down_f32">nvvm_shfl_down_f32</span>};</td></tr>
<tr><th id="229">229</th><td></td></tr>
<tr><th id="230">230</th><td>  <em>int</em> <dfn class="local col9 decl" id="29offset" title='offset' data-type='int' data-ref="29offset" data-ref-filename="29offset">offset</dfn> = <var>0</var>;</td></tr>
<tr><th id="231">231</th><td>  <b>if</b> (<a class="local col6 ref" href="#26op" title='op' data-ref="26op" data-ref-filename="26op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode::op" title='tvm::tir::CallNode::op' data-ref="tvm::tir::CallNode::op" data-ref-filename="tvm..tir..CallNode..op">op</a>.<a class="ref fn" href="../../../include/tvm/runtime/object.h.html#_ZNK3tvm7runtime9ObjectRef7same_asERKS1_" title='tvm::runtime::ObjectRef::same_as' data-ref="_ZNK3tvm7runtime9ObjectRef7same_asERKS1_" data-ref-filename="_ZNK3tvm7runtime9ObjectRef7same_asERKS1_">same_as</a>(<span class="namespace">builtin::</span><a class="ref fn" href="../../../include/tvm/tir/builtin.h.html#_ZN3tvm3tir7builtin16tvm_warp_shuffleEv" title='tvm::tir::builtin::tvm_warp_shuffle' data-ref="_ZN3tvm3tir7builtin16tvm_warp_shuffleEv" data-ref-filename="_ZN3tvm3tir7builtin16tvm_warp_shuffleEv">tvm_warp_shuffle</a>())) {</td></tr>
<tr><th id="232">232</th><td>    <a class="local col9 ref" href="#29offset" title='offset' data-ref="29offset" data-ref-filename="29offset">offset</a> = <var>0</var>;</td></tr>
<tr><th id="233">233</th><td>  } <b>else</b> <b>if</b> (<a class="local col6 ref" href="#26op" title='op' data-ref="26op" data-ref-filename="26op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode::op" title='tvm::tir::CallNode::op' data-ref="tvm::tir::CallNode::op" data-ref-filename="tvm..tir..CallNode..op">op</a>.<a class="ref fn" href="../../../include/tvm/runtime/object.h.html#_ZNK3tvm7runtime9ObjectRef7same_asERKS1_" title='tvm::runtime::ObjectRef::same_as' data-ref="_ZNK3tvm7runtime9ObjectRef7same_asERKS1_" data-ref-filename="_ZNK3tvm7runtime9ObjectRef7same_asERKS1_">same_as</a>(<span class="namespace">builtin::</span><a class="ref fn" href="../../../include/tvm/tir/builtin.h.html#_ZN3tvm3tir7builtin19tvm_warp_shuffle_upEv" title='tvm::tir::builtin::tvm_warp_shuffle_up' data-ref="_ZN3tvm3tir7builtin19tvm_warp_shuffle_upEv" data-ref-filename="_ZN3tvm3tir7builtin19tvm_warp_shuffle_upEv">tvm_warp_shuffle_up</a>())) {</td></tr>
<tr><th id="234">234</th><td>    <a class="local col9 ref" href="#29offset" title='offset' data-ref="29offset" data-ref-filename="29offset">offset</a> = <var>2</var>;</td></tr>
<tr><th id="235">235</th><td>  } <b>else</b> <b>if</b> (<a class="local col6 ref" href="#26op" title='op' data-ref="26op" data-ref-filename="26op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode::op" title='tvm::tir::CallNode::op' data-ref="tvm::tir::CallNode::op" data-ref-filename="tvm..tir..CallNode..op">op</a>.<a class="ref fn" href="../../../include/tvm/runtime/object.h.html#_ZNK3tvm7runtime9ObjectRef7same_asERKS1_" title='tvm::runtime::ObjectRef::same_as' data-ref="_ZNK3tvm7runtime9ObjectRef7same_asERKS1_" data-ref-filename="_ZNK3tvm7runtime9ObjectRef7same_asERKS1_">same_as</a>(<span class="namespace">builtin::</span><a class="ref fn" href="../../../include/tvm/tir/builtin.h.html#_ZN3tvm3tir7builtin21tvm_warp_shuffle_downEv" title='tvm::tir::builtin::tvm_warp_shuffle_down' data-ref="_ZN3tvm3tir7builtin21tvm_warp_shuffle_downEv" data-ref-filename="_ZN3tvm3tir7builtin21tvm_warp_shuffle_downEv">tvm_warp_shuffle_down</a>())) {</td></tr>
<tr><th id="236">236</th><td>    <a class="local col9 ref" href="#29offset" title='offset' data-ref="29offset" data-ref-filename="29offset">offset</a> = <var>4</var>;</td></tr>
<tr><th id="237">237</th><td>  } <b>else</b> {</td></tr>
<tr><th id="238">238</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="239">239</th><td>  }</td></tr>
<tr><th id="240">240</th><td></td></tr>
<tr><th id="241">241</th><td>  *<a class="local col7 ref" href="#27id" title='id' data-ref="27id" data-ref-filename="27id">id</a> = <a class="local col8 ref" href="#28ids" title='ids' data-ref="28ids" data-ref-filename="28ids">ids</a>[<a class="local col9 ref" href="#29offset" title='offset' data-ref="29offset" data-ref-filename="29offset">offset</a> + <a class="local col6 ref" href="#26op" title='op' data-ref="26op" data-ref-filename="26op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/ir/expr.h.html#tvm::PrimExprNode::dtype" title='tvm::PrimExprNode::dtype' data-ref="tvm::PrimExprNode::dtype" data-ref-filename="tvm..PrimExprNode..dtype">dtype</a>.<a class="ref fn" href="../../../include/tvm/runtime/data_type.h.html#_ZNK3tvm7runtime8DataType8is_floatEv" title='tvm::runtime::DataType::is_float' data-ref="_ZNK3tvm7runtime8DataType8is_floatEv" data-ref-filename="_ZNK3tvm7runtime8DataType8is_floatEv">is_float</a>()];</td></tr>
<tr><th id="242">242</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="243">243</th><td>}</td></tr>
<tr><th id="244">244</th><td></td></tr>
<tr><th id="245">245</th><td><span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</span>* <a class="type" href="#tvm::codegen::CodeGenNVPTX" title='tvm::codegen::CodeGenNVPTX' data-ref="tvm::codegen::CodeGenNVPTX" data-ref-filename="tvm..codegen..CodeGenNVPTX">CodeGenNVPTX</a>::<dfn class="virtual decl def fn" id="_ZN3tvm7codegen12CodeGenNVPTX15CreateIntrinsicEPKNS_3tir8CallNodeE" title='tvm::codegen::CodeGenNVPTX::CreateIntrinsic' data-ref="_ZN3tvm7codegen12CodeGenNVPTX15CreateIntrinsicEPKNS_3tir8CallNodeE" data-ref-filename="_ZN3tvm7codegen12CodeGenNVPTX15CreateIntrinsicEPKNS_3tir8CallNodeE">CreateIntrinsic</dfn>(<em>const</em> <a class="type" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode" title='tvm::tir::CallNode' data-ref="tvm::tir::CallNode" data-ref-filename="tvm..tir..CallNode">CallNode</a>* <dfn class="local col0 decl" id="30op" title='op' data-type='const tvm::tir::CallNode *' data-ref="30op" data-ref-filename="30op">op</dfn>) {</td></tr>
<tr><th id="246">246</th><td>  <span class="namespace">llvm::Intrinsic::</span><span class='typedef' title='llvm::Intrinsic::ID' data-type='unsigned int' data-ref="llvm::Intrinsic::ID" data-ref-filename="llvm..Intrinsic..ID">ID</span> <dfn class="local col1 decl" id="31id" title='id' data-type='llvm::Intrinsic::ID' data-ref="31id" data-ref-filename="31id">id</dfn> = <span class="namespace">llvm::Intrinsic::</span><span class='enum' title='llvm::Intrinsic::not_intrinsic' data-ref="llvm::Intrinsic::not_intrinsic" data-ref-filename="llvm..Intrinsic..not_intrinsic">not_intrinsic</span>;</td></tr>
<tr><th id="247">247</th><td>  <b>if</b> (<a class="tu ref fn" href="#_ZN3tvm7codegenL23GetWarpShuffleIntrinsicEPKNS_3tir8CallNodeEPj" title='tvm::codegen::GetWarpShuffleIntrinsic' data-use='c' data-ref="_ZN3tvm7codegenL23GetWarpShuffleIntrinsicEPKNS_3tir8CallNodeEPj" data-ref-filename="_ZN3tvm7codegenL23GetWarpShuffleIntrinsicEPKNS_3tir8CallNodeEPj">GetWarpShuffleIntrinsic</a>(<a class="local col0 ref" href="#30op" title='op' data-ref="30op" data-ref-filename="30op">op</a>, &amp;<a class="local col1 ref" href="#31id" title='id' data-ref="31id" data-ref-filename="31id">id</a>)) {</td></tr>
<tr><th id="248">248</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../include/c++/10/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector" data-ref-filename="std..vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</span>*&gt; <a class="ref fn fake" href="../../../../include/c++/10/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev" data-ref-filename="_ZNSt6vectorC1Ev"></a><dfn class="local col2 decl" id="32arg_value" title='arg_value' data-type='std::vector&lt;llvm::Value *&gt;' data-ref="32arg_value" data-ref-filename="32arg_value">arg_value</dfn>;</td></tr>
<tr><th id="249">249</th><td>    <span class="namespace">std::</span><a class="type" href="../../../../include/c++/10/bits/stl_vector.h.html#std::vector" title='std::vector' data-ref="std::vector" data-ref-filename="std..vector">vector</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type" data-ref-filename="llvm..Type">Type</span>*&gt; <a class="ref fn fake" href="../../../../include/c++/10/bits/stl_vector.h.html#_ZNSt6vectorC1Ev" title='std::vector::vector&lt;_Tp, _Alloc&gt;' data-ref="_ZNSt6vectorC1Ev" data-ref-filename="_ZNSt6vectorC1Ev"></a><dfn class="local col3 decl" id="33arg_type" title='arg_type' data-type='std::vector&lt;llvm::Type *&gt;' data-ref="33arg_type" data-ref-filename="33arg_type">arg_type</dfn>;</td></tr>
<tr><th id="250">250</th><td>    <i>// Ignore the first mask operand and remove the last</i></td></tr>
<tr><th id="251">251</th><td><i>    // redundant warp_size..</i></td></tr>
<tr><th id="252">252</th><td>    <span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col4 decl" id="34n_args" title='n_args' data-type='size_t' data-ref="34n_args" data-ref-filename="34n_args">n_args</dfn> = <a class="local col0 ref" href="#30op" title='op' data-ref="30op" data-ref-filename="30op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode::args" title='tvm::tir::CallNode::args' data-ref="tvm::tir::CallNode::args" data-ref-filename="tvm..tir..CallNode..args">args</a>.<a class="ref fn" href="../../../include/tvm/runtime/container/array.h.html#_ZNK3tvm7runtime5Array4sizeEv" title='tvm::runtime::Array::size' data-ref="_ZNK3tvm7runtime5Array4sizeEv" data-ref-filename="_ZNK3tvm7runtime5Array4sizeEv">size</a>() - <var>1</var>;</td></tr>
<tr><th id="253">253</th><td>    <b>for</b> (<span class='typedef' title='size_t' data-type='unsigned long' data-ref="size_t" data-ref-filename="size_t">size_t</span> <dfn class="local col5 decl" id="35i" title='i' data-type='size_t' data-ref="35i" data-ref-filename="35i">i</dfn> = <var>1</var>; <a class="local col5 ref" href="#35i" title='i' data-ref="35i" data-ref-filename="35i">i</a> &lt; <a class="local col4 ref" href="#34n_args" title='n_args' data-ref="34n_args" data-ref-filename="34n_args">n_args</a>; ++<a class="local col5 ref" href="#35i" title='i' data-ref="35i" data-ref-filename="35i">i</a>) {</td></tr>
<tr><th id="254">254</th><td>      <a class="local col2 ref" href="#32arg_value" title='arg_value' data-ref="32arg_value" data-ref-filename="32arg_value">arg_value</a>.<a class="ref fn" href="../../../../include/c++/10/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_" data-ref-filename="_ZNSt6vector9push_backEOT_">push_back</a>(<a class="member fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM9MakeValueERKNS_8PrimExprE" title='tvm::codegen::CodeGenLLVM::MakeValue' data-ref="_ZN3tvm7codegen11CodeGenLLVM9MakeValueERKNS_8PrimExprE" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM9MakeValueERKNS_8PrimExprE">MakeValue</a>(<a class="local col0 ref" href="#30op" title='op' data-ref="30op" data-ref-filename="30op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode::args" title='tvm::tir::CallNode::args' data-ref="tvm::tir::CallNode::args" data-ref-filename="tvm..tir..CallNode..args">args</a><a class="ref fn" href="../../../include/tvm/runtime/container/array.h.html#_ZNK3tvm7runtime5ArrayixEl" title='tvm::runtime::Array::operator[]' data-ref="_ZNK3tvm7runtime5ArrayixEl" data-ref-filename="_ZNK3tvm7runtime5ArrayixEl">[<a class="local col5 ref" href="#35i" title='i' data-ref="35i" data-ref-filename="35i">i</a>]</a>));</td></tr>
<tr><th id="255">255</th><td>      <a class="local col3 ref" href="#33arg_type" title='arg_type' data-ref="33arg_type" data-ref-filename="33arg_type">arg_type</a>.<a class="ref fn" href="../../../../include/c++/10/bits/stl_vector.h.html#_ZNSt6vector9push_backEOT_" title='std::vector::push_back' data-ref="_ZNSt6vector9push_backEOT_" data-ref-filename="_ZNSt6vector9push_backEOT_">push_back</a>(<a class="local col2 ref" href="#32arg_value" title='arg_value' data-ref="32arg_value" data-ref-filename="32arg_value">arg_value</a>.<a class="ref fn" href="../../../../include/c++/10/bits/stl_vector.h.html#_ZNSt6vector4backEv" title='std::vector::back' data-ref="_ZNSt6vector4backEv" data-ref-filename="_ZNSt6vector4backEv">back</a>()-&gt;<span class='ref fn' title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv" data-ref-filename="_ZNK4llvm5Value7getTypeEv">getType</span>());</td></tr>
<tr><th id="256">256</th><td>    }</td></tr>
<tr><th id="257">257</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Type' data-ref="llvm::Type" data-ref-filename="llvm..Type">Type</span>* <dfn class="local col6 decl" id="36return_type" title='return_type' data-type='llvm::Type *' data-ref="36return_type" data-ref-filename="36return_type">return_type</dfn> = <a class="local col3 ref" href="#33arg_type" title='arg_type' data-ref="33arg_type" data-ref-filename="33arg_type">arg_type</a><a class="ref fn" href="../../../../include/c++/10/bits/stl_vector.h.html#_ZNSt6vectorixEm" title='std::vector::operator[]' data-ref="_ZNSt6vectorixEm" data-ref-filename="_ZNSt6vectorixEm">[<var>0</var>]</a>;</td></tr>
<tr><th id="258">258</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Function' data-ref="llvm::Function" data-ref-filename="llvm..Function">Function</span>* <dfn class="local col7 decl" id="37func" title='func' data-type='llvm::Function *' data-ref="37func" data-ref-filename="37func">func</dfn> = <a class="member fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM16GetIntrinsicDeclEjPN4llvm4TypeENS2_8ArrayRefIS4_EE" title='tvm::codegen::CodeGenLLVM::GetIntrinsicDecl' data-ref="_ZN3tvm7codegen11CodeGenLLVM16GetIntrinsicDeclEjPN4llvm4TypeENS2_8ArrayRefIS4_EE" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM16GetIntrinsicDeclEjPN4llvm4TypeENS2_8ArrayRefIS4_EE">GetIntrinsicDecl</a>(<a class="local col1 ref" href="#31id" title='id' data-ref="31id" data-ref-filename="31id">id</a>, <a class="local col6 ref" href="#36return_type" title='return_type' data-ref="36return_type" data-ref-filename="36return_type">return_type</a>, <span class='ref fn fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt6vectorIT_TL0__E" data-ref-filename="_ZN4llvm8ArrayRefC1ERKSt6vectorIT_TL0__E"></span><a class="local col3 ref" href="#33arg_type" title='arg_type' data-ref="33arg_type" data-ref-filename="33arg_type">arg_type</a>);</td></tr>
<tr><th id="259">259</th><td>    <b>return</b> <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::builder_" title='tvm::codegen::CodeGenLLVM::builder_' data-ref="tvm::codegen::CodeGenLLVM::builder_" data-ref-filename="tvm..codegen..CodeGenLLVM..builder_">builder_</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><span class='ref fn' title='llvm::IRBuilderBase::CreateCall' data-ref="_ZN4llvm13IRBuilderBase10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE" data-ref-filename="_ZN4llvm13IRBuilderBase10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(<span class='ref fn fake' title='llvm::FunctionCallee::FunctionCallee' data-ref="_ZN4llvm14FunctionCalleeC1EPT_" data-ref-filename="_ZN4llvm14FunctionCalleeC1EPT_"></span><a class="local col7 ref" href="#37func" title='func' data-ref="37func" data-ref-filename="37func">func</a>, <span class='ref fn fake' title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt6vectorIT_TL0__E" data-ref-filename="_ZN4llvm8ArrayRefC1ERKSt6vectorIT_TL0__E"></span><a class="local col2 ref" href="#32arg_value" title='arg_value' data-ref="32arg_value" data-ref-filename="32arg_value">arg_value</a>);</td></tr>
<tr><th id="260">260</th><td>  } <b>else</b> <b>if</b> (<a class="local col0 ref" href="#30op" title='op' data-ref="30op" data-ref-filename="30op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode::op" title='tvm::tir::CallNode::op' data-ref="tvm::tir::CallNode::op" data-ref-filename="tvm..tir..CallNode..op">op</a>.<a class="ref fn" href="../../../include/tvm/runtime/object.h.html#_ZNK3tvm7runtime9ObjectRef7same_asERKS1_" title='tvm::runtime::ObjectRef::same_as' data-ref="_ZNK3tvm7runtime9ObjectRef7same_asERKS1_" data-ref-filename="_ZNK3tvm7runtime9ObjectRef7same_asERKS1_">same_as</a>(<span class="namespace">builtin::</span><a class="ref fn" href="../../../include/tvm/tir/builtin.h.html#_ZN3tvm3tir7builtin19tvm_warp_activemaskEv" title='tvm::tir::builtin::tvm_warp_activemask' data-ref="_ZN3tvm3tir7builtin19tvm_warp_activemaskEv" data-ref-filename="_ZN3tvm3tir7builtin19tvm_warp_activemaskEv">tvm_warp_activemask</a>())) {</td></tr>
<tr><th id="261">261</th><td>    <i>// Only nvptx target may keep this intrinsic at this point.</i></td></tr>
<tr><th id="262">262</th><td><i>    // PTX assembly: asm "activemask.b32 r1;"</i></td></tr>
<tr><th id="263">263</th><td>    <em>auto</em> <dfn class="local col8 decl" id="38fty" title='fty' data-type='llvm::FunctionType *' data-ref="38fty" data-ref-filename="38fty">fty</dfn> = <span class="namespace">llvm::</span><span class='type' title='llvm::FunctionType' data-ref="llvm::FunctionType" data-ref-filename="llvm..FunctionType">FunctionType</span>::<span class='ref fn' title='llvm::FunctionType::get' data-ref="_ZN4llvm12FunctionType3getEPNS_4TypeEb" data-ref-filename="_ZN4llvm12FunctionType3getEPNS_4TypeEb">get</span>(<a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::t_int32_" title='tvm::codegen::CodeGenLLVM::t_int32_' data-ref="tvm::codegen::CodeGenLLVM::t_int32_" data-ref-filename="tvm..codegen..CodeGenLLVM..t_int32_">t_int32_</a>, <b>false</b>);</td></tr>
<tr><th id="264">264</th><td>    <em>auto</em> <dfn class="local col9 decl" id="39val" title='val' data-type='llvm::InlineAsm *' data-ref="39val" data-ref-filename="39val">val</dfn> = <span class="namespace">llvm::</span><span class='type' title='llvm::InlineAsm' data-ref="llvm::InlineAsm" data-ref-filename="llvm..InlineAsm">InlineAsm</span>::<span class='ref fn' title='llvm::InlineAsm::get' data-ref="_ZN4llvm9InlineAsm3getEPNS_12FunctionTypeENS_9StringRefES3_bbNS0_10AsmDialectEb" data-ref-filename="_ZN4llvm9InlineAsm3getEPNS_12FunctionTypeENS_9StringRefES3_bbNS0_10AsmDialectEb">get</span>(<a class="local col8 ref" href="#38fty" title='fty' data-ref="38fty" data-ref-filename="38fty">fty</a>, <span class='ref fn fake' title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></span><q>"activemask.b32 %0"</q>, <span class='ref fn fake' title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc" data-ref-filename="_ZN4llvm9StringRefC1EPKc"></span><q>"=r"</q>, <b>true</b>);</td></tr>
<tr><th id="265">265</th><td>    <b>return</b> <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::builder_" title='tvm::codegen::CodeGenLLVM::builder_' data-ref="tvm::codegen::CodeGenLLVM::builder_" data-ref-filename="tvm..codegen..CodeGenLLVM..builder_">builder_</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><span class='ref fn' title='llvm::IRBuilderBase::CreateCall' data-ref="_ZN4llvm13IRBuilderBase10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE" data-ref-filename="_ZN4llvm13IRBuilderBase10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</span>(<span class='ref fn fake' title='llvm::FunctionCallee::FunctionCallee' data-ref="_ZN4llvm14FunctionCalleeC1EPT_" data-ref-filename="_ZN4llvm14FunctionCalleeC1EPT_"></span><a class="local col9 ref" href="#39val" title='val' data-ref="39val" data-ref-filename="39val">val</a>);</td></tr>
<tr><th id="266">266</th><td>  } <b>else</b> <b>if</b> (<a class="local col0 ref" href="#30op" title='op' data-ref="30op" data-ref-filename="30op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode::op" title='tvm::tir::CallNode::op' data-ref="tvm::tir::CallNode::op" data-ref-filename="tvm..tir..CallNode..op">op</a>.<a class="ref fn" href="../../../include/tvm/runtime/object.h.html#_ZNK3tvm7runtime9ObjectRef7same_asERKS1_" title='tvm::runtime::ObjectRef::same_as' data-ref="_ZNK3tvm7runtime9ObjectRef7same_asERKS1_" data-ref-filename="_ZNK3tvm7runtime9ObjectRef7same_asERKS1_">same_as</a>(<span class="namespace">builtin::</span><a class="ref fn" href="../../../include/tvm/tir/builtin.h.html#_ZN3tvm3tir7builtin10atomic_addEv" title='tvm::tir::builtin::atomic_add' data-ref="_ZN3tvm3tir7builtin10atomic_addEv" data-ref-filename="_ZN3tvm3tir7builtin10atomic_addEv">atomic_add</a>())) {</td></tr>
<tr><th id="267">267</th><td>    <a class="macro" href="../../../include/tvm/runtime/logging.h.html#680" title="if (!(op-&gt;args[1]-&gt;dtype.bits() == 32)) ::tvm::runtime::detail::LogFatal(&quot;/home/runner/work/tvm-woboq/tvm-woboq/tvm/src/target/llvm/codegen_nvptx.cc&quot;, 267).stream() &lt;&lt; ::tvm::runtime::detail::kTVM_INTERNAL_ERROR_MESSAGE &lt;&lt; &quot;  &quot; &lt;&lt; &quot;Check failed: (&quot; &quot;op-&gt;args[1]-&gt;dtype.bits() == 32&quot; &lt;&lt; &quot;) is false: &quot;" data-ref="_M/ICHECK">ICHECK</a>(<a class="local col0 ref" href="#30op" title='op' data-ref="30op" data-ref-filename="30op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode::args" title='tvm::tir::CallNode::args' data-ref="tvm::tir::CallNode::args" data-ref-filename="tvm..tir..CallNode..args">args</a>[<var>1</var>]<a class="ref fn" href="../../../include/tvm/ir/expr.h.html#128" title='tvm::PrimExpr::operator-&gt;' data-ref="_ZNK3tvm8PrimExprptEv" data-ref-filename="_ZNK3tvm8PrimExprptEv">-&gt;</a><a class="ref field" href="../../../include/tvm/ir/expr.h.html#tvm::PrimExprNode::dtype" title='tvm::PrimExprNode::dtype' data-ref="tvm::PrimExprNode::dtype" data-ref-filename="tvm..PrimExprNode..dtype">dtype</a>.<a class="ref fn" href="../../../include/tvm/runtime/data_type.h.html#_ZNK3tvm7runtime8DataType4bitsEv" title='tvm::runtime::DataType::bits' data-ref="_ZNK3tvm7runtime8DataType4bitsEv" data-ref-filename="_ZNK3tvm7runtime8DataType4bitsEv">bits</a>() == <var>32</var>) <a class="ref fn" href="../../../../include/c++/10/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"Only supports 32 bit atomic for now"</q>;</td></tr>
<tr><th id="268">268</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</span>* <dfn class="local col0 decl" id="40v0" title='v0' data-type='llvm::Value *' data-ref="40v0" data-ref-filename="40v0">v0</dfn> = <a class="member fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM9MakeValueERKNS_8PrimExprE" title='tvm::codegen::CodeGenLLVM::MakeValue' data-ref="_ZN3tvm7codegen11CodeGenLLVM9MakeValueERKNS_8PrimExprE" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM9MakeValueERKNS_8PrimExprE">MakeValue</a>(<a class="local col0 ref" href="#30op" title='op' data-ref="30op" data-ref-filename="30op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode::args" title='tvm::tir::CallNode::args' data-ref="tvm::tir::CallNode::args" data-ref-filename="tvm..tir..CallNode..args">args</a><a class="ref fn" href="../../../include/tvm/runtime/container/array.h.html#_ZNK3tvm7runtime5ArrayixEl" title='tvm::runtime::Array::operator[]' data-ref="_ZNK3tvm7runtime5ArrayixEl" data-ref-filename="_ZNK3tvm7runtime5ArrayixEl">[<var>0</var>]</a>);</td></tr>
<tr><th id="269">269</th><td>    <span class="namespace">llvm::</span><span class='type' title='llvm::Value' data-ref="llvm::Value" data-ref-filename="llvm..Value">Value</span>* <dfn class="local col1 decl" id="41v1" title='v1' data-type='llvm::Value *' data-ref="41v1" data-ref-filename="41v1">v1</dfn> = <a class="member fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM9MakeValueERKNS_8PrimExprE" title='tvm::codegen::CodeGenLLVM::MakeValue' data-ref="_ZN3tvm7codegen11CodeGenLLVM9MakeValueERKNS_8PrimExprE" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM9MakeValueERKNS_8PrimExprE">MakeValue</a>(<a class="local col0 ref" href="#30op" title='op' data-ref="30op" data-ref-filename="30op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode::args" title='tvm::tir::CallNode::args' data-ref="tvm::tir::CallNode::args" data-ref-filename="tvm..tir..CallNode..args">args</a><a class="ref fn" href="../../../include/tvm/runtime/container/array.h.html#_ZNK3tvm7runtime5ArrayixEl" title='tvm::runtime::Array::operator[]' data-ref="_ZNK3tvm7runtime5ArrayixEl" data-ref-filename="_ZNK3tvm7runtime5ArrayixEl">[<var>1</var>]</a>);</td></tr>
<tr><th id="270">270</th><td>    <b>if</b> (<a class="local col0 ref" href="#30op" title='op' data-ref="30op" data-ref-filename="30op">op</a>-&gt;<a class="ref field" href="../../../include/tvm/tir/expr.h.html#tvm::tir::CallNode::args" title='tvm::tir::CallNode::args' data-ref="tvm::tir::CallNode::args" data-ref-filename="tvm..tir..CallNode..args">args</a><a class="ref fn" href="../../../include/tvm/runtime/container/array.h.html#_ZNK3tvm7runtime5ArrayixEl" title='tvm::runtime::Array::operator[]' data-ref="_ZNK3tvm7runtime5ArrayixEl" data-ref-filename="_ZNK3tvm7runtime5ArrayixEl">[<var>1</var>]</a><a class="ref fn" href="../../../include/tvm/ir/expr.h.html#128" title='tvm::PrimExpr::operator-&gt;' data-ref="_ZNK3tvm8PrimExprptEv" data-ref-filename="_ZNK3tvm8PrimExprptEv">-&gt;</a><a class="ref field" href="../../../include/tvm/ir/expr.h.html#tvm::PrimExprNode::dtype" title='tvm::PrimExprNode::dtype' data-ref="tvm::PrimExprNode::dtype" data-ref-filename="tvm..PrimExprNode..dtype">dtype</a>.<a class="ref fn" href="../../../include/tvm/runtime/data_type.h.html#_ZNK3tvm7runtime8DataType8is_floatEv" title='tvm::runtime::DataType::is_float' data-ref="_ZNK3tvm7runtime8DataType8is_floatEv" data-ref-filename="_ZNK3tvm7runtime8DataType8is_floatEv">is_float</a>()) {</td></tr>
<tr><th id="271">271</th><td><u>#<span data-ppcond="271">if</span> <span class="macro" title="140" data-ref="_M/TVM_LLVM_VERSION">TVM_LLVM_VERSION</span> &gt;= 90</u></td></tr>
<tr><th id="272">272</th><td><u>#<span data-ppcond="272">if</span> <span class="macro" title="140" data-ref="_M/TVM_LLVM_VERSION">TVM_LLVM_VERSION</span> &gt;= 130</u></td></tr>
<tr><th id="273">273</th><td>      <b>return</b> <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::builder_" title='tvm::codegen::CodeGenLLVM::builder_' data-ref="tvm::codegen::CodeGenLLVM::builder_" data-ref-filename="tvm..codegen..CodeGenLLVM..builder_">builder_</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><span class='ref fn' title='llvm::IRBuilderBase::CreateAtomicRMW' data-ref="_ZN4llvm13IRBuilderBase15CreateAtomicRMWENS_13AtomicRMWInst5BinOpEPNS_5ValueES4_NS_10MaybeAlignENS_14AtomicOrderingEh" data-ref-filename="_ZN4llvm13IRBuilderBase15CreateAtomicRMWENS_13AtomicRMWInst5BinOpEPNS_5ValueES4_NS_10MaybeAlignENS_14AtomicOrderingEh">CreateAtomicRMW</span>(<span class="namespace">llvm::</span><span class='type' title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst" data-ref-filename="llvm..AtomicRMWInst">AtomicRMWInst</span>::<span class='enum' title='llvm::AtomicRMWInst::FAdd' data-ref="llvm::AtomicRMWInst::FAdd" data-ref-filename="llvm..AtomicRMWInst..FAdd">FAdd</span>, <a class="local col0 ref" href="#40v0" title='v0' data-ref="40v0" data-ref-filename="40v0">v0</a>, <a class="local col1 ref" href="#41v1" title='v1' data-ref="41v1" data-ref-filename="41v1">v1</a>, <span class="namespace">llvm::</span><span class='type' title='llvm::MaybeAlign' data-ref="llvm::MaybeAlign" data-ref-filename="llvm..MaybeAlign">MaybeAlign</span><span class='ref fn' title='llvm::MaybeAlign::MaybeAlign' data-ref="_ZN4llvm10MaybeAlignC1Ev" data-ref-filename="_ZN4llvm10MaybeAlignC1Ev">(</span>),</td></tr>
<tr><th id="274">274</th><td>                                       <span class="namespace">llvm::</span><span class='type' title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering" data-ref-filename="llvm..AtomicOrdering">AtomicOrdering</span>::<span class='enum' title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic" data-ref-filename="llvm..AtomicOrdering..Monotonic">Monotonic</span>);</td></tr>
<tr><th id="275">275</th><td><u>#<span data-ppcond="272">else</span></u></td></tr>
<tr><th id="276">276</th><td>      <b>return</b> builder_-&gt;CreateAtomicRMW(llvm::AtomicRMWInst::FAdd, v0, v1,</td></tr>
<tr><th id="277">277</th><td>                                       llvm::AtomicOrdering::Monotonic);</td></tr>
<tr><th id="278">278</th><td><u>#<span data-ppcond="272">endif</span></u></td></tr>
<tr><th id="279">279</th><td><u>#<span data-ppcond="271">else</span></u></td></tr>
<tr><th id="280">280</th><td>      LOG(FATAL) &lt;&lt; <q>"Floating point atomic requires LLVM 9 or newer"</q>;</td></tr>
<tr><th id="281">281</th><td><u>#<span data-ppcond="271">endif</span></u></td></tr>
<tr><th id="282">282</th><td>    }</td></tr>
<tr><th id="283">283</th><td><u>#<span data-ppcond="283">if</span> <span class="macro" title="140" data-ref="_M/TVM_LLVM_VERSION">TVM_LLVM_VERSION</span> &gt;= 130</u></td></tr>
<tr><th id="284">284</th><td>    <b>return</b> <a class="member field" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM::builder_" title='tvm::codegen::CodeGenLLVM::builder_' data-ref="tvm::codegen::CodeGenLLVM::builder_" data-ref-filename="tvm..codegen..CodeGenLLVM..builder_">builder_</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><span class='ref fn' title='llvm::IRBuilderBase::CreateAtomicRMW' data-ref="_ZN4llvm13IRBuilderBase15CreateAtomicRMWENS_13AtomicRMWInst5BinOpEPNS_5ValueES4_NS_10MaybeAlignENS_14AtomicOrderingEh" data-ref-filename="_ZN4llvm13IRBuilderBase15CreateAtomicRMWENS_13AtomicRMWInst5BinOpEPNS_5ValueES4_NS_10MaybeAlignENS_14AtomicOrderingEh">CreateAtomicRMW</span>(<span class="namespace">llvm::</span><span class='type' title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst" data-ref-filename="llvm..AtomicRMWInst">AtomicRMWInst</span>::<span class='enum' title='llvm::AtomicRMWInst::Add' data-ref="llvm::AtomicRMWInst::Add" data-ref-filename="llvm..AtomicRMWInst..Add">Add</span>, <a class="local col0 ref" href="#40v0" title='v0' data-ref="40v0" data-ref-filename="40v0">v0</a>, <a class="local col1 ref" href="#41v1" title='v1' data-ref="41v1" data-ref-filename="41v1">v1</a>, <span class="namespace">llvm::</span><span class='type' title='llvm::MaybeAlign' data-ref="llvm::MaybeAlign" data-ref-filename="llvm..MaybeAlign">MaybeAlign</span><span class='ref fn' title='llvm::MaybeAlign::MaybeAlign' data-ref="_ZN4llvm10MaybeAlignC1Ev" data-ref-filename="_ZN4llvm10MaybeAlignC1Ev">(</span>),</td></tr>
<tr><th id="285">285</th><td>                                     <span class="namespace">llvm::</span><span class='type' title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering" data-ref-filename="llvm..AtomicOrdering">AtomicOrdering</span>::<span class='enum' title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic" data-ref-filename="llvm..AtomicOrdering..Monotonic">Monotonic</span>);</td></tr>
<tr><th id="286">286</th><td><u>#<span data-ppcond="283">else</span></u></td></tr>
<tr><th id="287">287</th><td>    <b>return</b> builder_-&gt;CreateAtomicRMW(llvm::AtomicRMWInst::Add, v0, v1,</td></tr>
<tr><th id="288">288</th><td>                                     llvm::AtomicOrdering::Monotonic);</td></tr>
<tr><th id="289">289</th><td><u>#<span data-ppcond="283">endif</span></u></td></tr>
<tr><th id="290">290</th><td>  }</td></tr>
<tr><th id="291">291</th><td>  <b>return</b> <a class="type" href="codegen_llvm.h.html#tvm::codegen::CodeGenLLVM" title='tvm::codegen::CodeGenLLVM' data-ref="tvm::codegen::CodeGenLLVM" data-ref-filename="tvm..codegen..CodeGenLLVM">CodeGenLLVM</a>::<a class="virtual member fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM15CreateIntrinsicEPKNS_3tir8CallNodeE" title='tvm::codegen::CodeGenLLVM::CreateIntrinsic' data-ref="_ZN3tvm7codegen11CodeGenLLVM15CreateIntrinsicEPKNS_3tir8CallNodeE" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM15CreateIntrinsicEPKNS_3tir8CallNodeE">CreateIntrinsic</a>(<a class="local col0 ref" href="#30op" title='op' data-ref="30op" data-ref-filename="30op">op</a>);</td></tr>
<tr><th id="292">292</th><td>}</td></tr>
<tr><th id="293">293</th><td></td></tr>
<tr><th id="294">294</th><td><em>int</em> <dfn class="decl def fn" id="_ZN3tvm7codegen21GetCUDAComputeVersionERKNS_6TargetE" title='tvm::codegen::GetCUDAComputeVersion' data-ref="_ZN3tvm7codegen21GetCUDAComputeVersionERKNS_6TargetE" data-ref-filename="_ZN3tvm7codegen21GetCUDAComputeVersionERKNS_6TargetE">GetCUDAComputeVersion</dfn>(<em>const</em> <a class="type" href="../../../include/tvm/target/target.h.html#tvm::Target" title='tvm::Target' data-ref="tvm::Target" data-ref-filename="tvm..Target">Target</a>&amp; <dfn class="local col2 decl" id="42target" title='target' data-type='const tvm::Target &amp;' data-ref="42target" data-ref-filename="42target">target</dfn>) {</td></tr>
<tr><th id="295">295</th><td>  <a class="type" href="../../../include/tvm/runtime/container/optional.h.html#tvm::runtime::Optional" title='tvm::runtime::Optional' data-ref="tvm::runtime::Optional" data-ref-filename="tvm..runtime..Optional">Optional</a>&lt;String&gt; <dfn class="local col3 decl" id="43mcpu" title='mcpu' data-type='Optional&lt;tvm::runtime::String&gt;' data-ref="43mcpu" data-ref-filename="43mcpu">mcpu</dfn> = <a class="local col2 ref" href="#42target" title='target' data-ref="42target" data-ref-filename="42target">target</a><a class="ref fn" href="../../../include/tvm/target/target.h.html#213" title='tvm::Target::operator-&gt;' data-ref="_ZNK3tvm6TargetptEv" data-ref-filename="_ZNK3tvm6TargetptEv">-&gt;</a><a class="ref fn" href="../../../include/tvm/target/target.h.html#_ZNK3tvm10TargetNode7GetAttrERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEENS_7runtime8OptionalIT_EE" title='tvm::TargetNode::GetAttr' data-ref="_ZNK3tvm10TargetNode7GetAttrERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEENS_7runtime8OptionalIT_EE" data-ref-filename="_ZNK3tvm10TargetNode7GetAttrERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEENS_7runtime8OptionalIT_EE">GetAttr</a>&lt;String&gt;(<a class="ref fn fake" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" data-ref-filename="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_"></a><q>"mcpu"</q>);</td></tr>
<tr><th id="296">296</th><td>  <a class="macro" href="../../../include/tvm/runtime/logging.h.html#680" title="if (!(mcpu.defined())) ::tvm::runtime::detail::LogFatal(&quot;/home/runner/work/tvm-woboq/tvm-woboq/tvm/src/target/llvm/codegen_nvptx.cc&quot;, 296).stream() &lt;&lt; ::tvm::runtime::detail::kTVM_INTERNAL_ERROR_MESSAGE &lt;&lt; &quot;  &quot; &lt;&lt; &quot;Check failed: (&quot; &quot;mcpu.defined()&quot; &lt;&lt; &quot;) is false: &quot;" data-ref="_M/ICHECK">ICHECK</a>(<a class="local col3 ref" href="#43mcpu" title='mcpu' data-ref="43mcpu" data-ref-filename="43mcpu">mcpu</a>.<a class="ref fn" href="../../../include/tvm/runtime/object.h.html#_ZNK3tvm7runtime9ObjectRef7definedEv" title='tvm::runtime::ObjectRef::defined' data-ref="_ZNK3tvm7runtime9ObjectRef7definedEv" data-ref-filename="_ZNK3tvm7runtime9ObjectRef7definedEv">defined</a>()) <a class="ref fn" href="../../../../include/c++/10/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"InternalError: \"-mcpu\" is undefined in the NVPTX target"</q>;</td></tr>
<tr><th id="297">297</th><td>  <span class="namespace">std::</span><a class="typedef" href="../../../../include/c++/10/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</a> <dfn class="local col4 decl" id="44sm_version" title='sm_version' data-type='std::string' data-ref="44sm_version" data-ref-filename="44sm_version">sm_version</dfn> = <a class="ref fn fake" href="../../../include/tvm/runtime/container/string.h.html#_ZNK3tvm7runtime6StringcvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv" title='tvm::runtime::String::operator basic_string' data-ref="_ZNK3tvm7runtime6StringcvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv" data-ref-filename="_ZNK3tvm7runtime6StringcvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv"></a><a class="local col3 ref" href="#43mcpu" title='mcpu' data-ref="43mcpu" data-ref-filename="43mcpu">mcpu</a>.<a class="ref fn" href="../../../include/tvm/runtime/container/optional.h.html#_ZNK3tvm7runtime8Optional5valueEv" title='tvm::runtime::Optional::value' data-ref="_ZNK3tvm7runtime8Optional5valueEv" data-ref-filename="_ZNK3tvm7runtime8Optional5valueEv">value</a>();</td></tr>
<tr><th id="298">298</th><td>  <b>return</b> <span class="namespace">std::</span><a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNSt7__cxx114stoiERKNS_12basic_stringIcSt11char_traitsIcESaIcEEEPmi" title='std::stoi' data-ref="_ZNSt7__cxx114stoiERKNS_12basic_stringIcSt11char_traitsIcESaIcEEEPmi" data-ref-filename="_ZNSt7__cxx114stoiERKNS_12basic_stringIcSt11char_traitsIcESaIcEEEPmi">stoi</a>(<a class="local col4 ref" href="#44sm_version" title='sm_version' data-ref="44sm_version" data-ref-filename="44sm_version">sm_version</a>.<a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string6substrEN9__gnu_cxx14__alloc_traitsINS2_IT1_NS3_10value_typeEE6rebindIT_E5otherENS8_5other10value_typeEE9size_typeESC_" title='std::basic_string::substr' data-ref="_ZNKSt7__cxx1112basic_string6substrEN9__gnu_cxx14__alloc_traitsINS2_IT1_NS3_10value_typeEE6rebindIT_E5otherENS8_5other10value_typeEE9size_typeESC_" data-ref-filename="_ZNKSt7__cxx1112basic_string6substrEN9__gnu_cxx14__alloc_traitsINS2_IT1_NS3_10value_typeEE6rebindIT_E5otherENS8_5other10value_typeEE9size_typeESC_">substr</a>(<var>3</var>));</td></tr>
<tr><th id="299">299</th><td>}</td></tr>
<tr><th id="300">300</th><td></td></tr>
<tr><th id="301">301</th><td><span class="namespace">runtime::</span><a class="type" href="../../../include/tvm/runtime/module.h.html#tvm::runtime::Module" title='tvm::runtime::Module' data-ref="tvm::runtime::Module" data-ref-filename="tvm..runtime..Module">Module</a> <dfn class="decl def fn" id="_ZN3tvm7codegen10BuildNVPTXENS_8IRModuleENS_6TargetE" title='tvm::codegen::BuildNVPTX' data-ref="_ZN3tvm7codegen10BuildNVPTXENS_8IRModuleENS_6TargetE" data-ref-filename="_ZN3tvm7codegen10BuildNVPTXENS_8IRModuleENS_6TargetE">BuildNVPTX</dfn>(<a class="type" href="../../../include/tvm/ir/module.h.html#tvm::IRModule" title='tvm::IRModule' data-ref="tvm::IRModule" data-ref-filename="tvm..IRModule">IRModule</a> <dfn class="local col5 decl" id="45mod" title='mod' data-type='tvm::IRModule' data-ref="45mod" data-ref-filename="45mod">mod</dfn>, <a class="type" href="../../../include/tvm/target/target.h.html#tvm::Target" title='tvm::Target' data-ref="tvm::Target" data-ref-filename="tvm..Target">Target</a> <dfn class="local col6 decl" id="46target" title='target' data-type='tvm::Target' data-ref="46target" data-ref-filename="46target">target</dfn>) {</td></tr>
<tr><th id="302">302</th><td>  <a class="type" href="llvm_instance.h.html#tvm::codegen::LLVMInstance" title='tvm::codegen::LLVMInstance' data-ref="tvm::codegen::LLVMInstance" data-ref-filename="tvm..codegen..LLVMInstance">LLVMInstance</a> <a class="ref fn fake" href="llvm_instance.h.html#_ZN3tvm7codegen12LLVMInstanceC1Ev" title='tvm::codegen::LLVMInstance::LLVMInstance' data-ref="_ZN3tvm7codegen12LLVMInstanceC1Ev" data-ref-filename="_ZN3tvm7codegen12LLVMInstanceC1Ev"></a><dfn class="local col7 decl" id="47llvm_instance" title='llvm_instance' data-type='tvm::codegen::LLVMInstance' data-ref="47llvm_instance" data-ref-filename="47llvm_instance">llvm_instance</dfn>;</td></tr>
<tr><th id="303">303</th><td>  <a class="type" href="../../../include/tvm/support/with.h.html#tvm::With" title='tvm::With' data-ref="tvm::With" data-ref-filename="tvm..With">With</a>&lt;<a class="type" href="llvm_instance.h.html#tvm::codegen::LLVMTarget" title='tvm::codegen::LLVMTarget' data-ref="tvm::codegen::LLVMTarget" data-ref-filename="tvm..codegen..LLVMTarget">LLVMTarget</a>&gt; <dfn class="local col8 decl" id="48llvm_target" title='llvm_target' data-type='With&lt;tvm::codegen::LLVMTarget&gt;' data-ref="48llvm_target" data-ref-filename="48llvm_target">llvm_target</dfn><a class="ref fn" href="../../../include/tvm/support/with.h.html#_ZN3tvm4WithC1EDpOTL0__" title='tvm::With::With&lt;ContextType&gt;' data-ref="_ZN3tvm4WithC1EDpOTL0__" data-ref-filename="_ZN3tvm4WithC1EDpOTL0__">(</a><a class="local col7 ref" href="#47llvm_instance" title='llvm_instance' data-ref="47llvm_instance" data-ref-filename="47llvm_instance">llvm_instance</a>, <a class="local col6 ref" href="#46target" title='target' data-ref="46target" data-ref-filename="46target">target</a>);</td></tr>
<tr><th id="304">304</th><td></td></tr>
<tr><th id="305">305</th><td>  <em>int</em> <dfn class="local col9 decl" id="49compute_ver" title='compute_ver' data-type='int' data-ref="49compute_ver" data-ref-filename="49compute_ver">compute_ver</dfn> = <a class="ref fn" href="#_ZN3tvm7codegen21GetCUDAComputeVersionERKNS_6TargetE" title='tvm::codegen::GetCUDAComputeVersion' data-ref="_ZN3tvm7codegen21GetCUDAComputeVersionERKNS_6TargetE" data-ref-filename="_ZN3tvm7codegen21GetCUDAComputeVersionERKNS_6TargetE">GetCUDAComputeVersion</a>(<a class="local col6 ref" href="#46target" title='target' data-ref="46target" data-ref-filename="46target">target</a>);</td></tr>
<tr><th id="306">306</th><td>  <em>auto</em> <dfn class="local col0 decl" id="50cg" title='cg' data-type='typename _MakeUniq&lt;CodeGenNVPTX&gt;::__single_object' data-ref="50cg" data-ref-filename="50cg">cg</dfn> = <span class="namespace">std::</span><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZSt11make_uniqueDpOT0_" title='std::make_unique' data-ref="_ZSt11make_uniqueDpOT0_" data-ref-filename="_ZSt11make_uniqueDpOT0_">make_unique</a>&lt;<a class="type" href="#tvm::codegen::CodeGenNVPTX" title='tvm::codegen::CodeGenNVPTX' data-ref="tvm::codegen::CodeGenNVPTX" data-ref-filename="tvm..codegen..CodeGenNVPTX">CodeGenNVPTX</a>&gt;();</td></tr>
<tr><th id="307">307</th><td></td></tr>
<tr><th id="308">308</th><td>  <a class="local col0 ref" href="#50cg" title='cg' data-ref="50cg" data-ref-filename="50cg">cg</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="virtual ref fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM4InitERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPNS0_10LLVMTargetEbbb" title='tvm::codegen::CodeGenLLVM::Init' data-ref="_ZN3tvm7codegen11CodeGenLLVM4InitERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPNS0_10LLVMTargetEbbb" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM4InitERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEPNS0_10LLVMTargetEbbb">Init</a>(<a class="ref fn fake" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" data-ref-filename="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_"></a><q>"TVMPTXModule"</q>, <a class="local col8 ref" href="#48llvm_target" title='llvm_target' data-ref="48llvm_target" data-ref-filename="48llvm_target">llvm_target</a>.<a class="ref fn" href="../../../include/tvm/support/with.h.html#_ZN3tvm4With3getEv" title='tvm::With::get' data-ref="_ZN3tvm4With3getEv" data-ref-filename="_ZN3tvm4With3getEv">get</a>(), <b>false</b>, <b>false</b>, <b>false</b>);</td></tr>
<tr><th id="309">309</th><td></td></tr>
<tr><th id="310">310</th><td>  <a class="local col0 ref" href="#50cg" title='cg' data-ref="50cg" data-ref-filename="50cg">cg</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="tu ref fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM19AddFunctionsOrderedET_S2_T0_" title='tvm::codegen::CodeGenLLVM::AddFunctionsOrdered' data-use='c' data-ref="_ZN3tvm7codegen11CodeGenLLVM19AddFunctionsOrderedET_S2_T0_" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM19AddFunctionsOrderedET_S2_T0_">AddFunctionsOrdered</a>(<a class="local col5 ref" href="#45mod" title='mod' data-ref="45mod" data-ref-filename="45mod">mod</a><a class="ref fn" href="../../../include/tvm/ir/module.h.html#_ZNK3tvm8IRModuleptEv" title='tvm::IRModule::operator-&gt;' data-ref="_ZNK3tvm8IRModuleptEv" data-ref-filename="_ZNK3tvm8IRModuleptEv">-&gt;</a><a class="ref field" href="../../../include/tvm/ir/module.h.html#tvm::IRModuleNode::functions" title='tvm::IRModuleNode::functions' data-ref="tvm::IRModuleNode::functions" data-ref-filename="tvm..IRModuleNode..functions">functions</a>.<a class="ref fn" href="../../../include/tvm/runtime/container/map.h.html#_ZNK3tvm7runtime3Map5beginEv" title='tvm::runtime::Map::begin' data-ref="_ZNK3tvm7runtime3Map5beginEv" data-ref-filename="_ZNK3tvm7runtime3Map5beginEv">begin</a>(), <a class="local col5 ref" href="#45mod" title='mod' data-ref="45mod" data-ref-filename="45mod">mod</a><a class="ref fn" href="../../../include/tvm/ir/module.h.html#_ZNK3tvm8IRModuleptEv" title='tvm::IRModule::operator-&gt;' data-ref="_ZNK3tvm8IRModuleptEv" data-ref-filename="_ZNK3tvm8IRModuleptEv">-&gt;</a><a class="ref field" href="../../../include/tvm/ir/module.h.html#tvm::IRModuleNode::functions" title='tvm::IRModuleNode::functions' data-ref="tvm::IRModuleNode::functions" data-ref-filename="tvm..IRModuleNode..functions">functions</a>.<a class="ref fn" href="../../../include/tvm/runtime/container/map.h.html#_ZNK3tvm7runtime3Map3endEv" title='tvm::runtime::Map::end' data-ref="_ZNK3tvm7runtime3Map3endEv" data-ref-filename="_ZNK3tvm7runtime3Map3endEv">end</a>(), [](<em>auto</em>&amp; <dfn class="local col1 decl" id="51kv" title='kv' data-type='auto &amp;' data-ref="51kv" data-ref-filename="51kv">kv</dfn>) {</td></tr>
<tr><th id="311">311</th><td>    <a class="macro" href="../../../include/tvm/runtime/logging.h.html#680" title="if (!(kv.second-&gt;template IsInstance&lt;PrimFuncNode&gt;())) ::tvm::runtime::detail::LogFatal(&quot;/home/runner/work/tvm-woboq/tvm-woboq/tvm/src/target/llvm/codegen_nvptx.cc&quot;, 311).stream() &lt;&lt; ::tvm::runtime::detail::kTVM_INTERNAL_ERROR_MESSAGE &lt;&lt; &quot;  &quot; &lt;&lt; &quot;Check failed: (&quot; &quot;kv.second-&gt;template IsInstance&lt;PrimFuncNode&gt;()&quot; &lt;&lt; &quot;) is false: &quot;" data-ref="_M/ICHECK">ICHECK</a>(<a class="local col1 ref" href="#51kv" title='kv' data-ref="51kv" data-ref-filename="51kv">kv</a>.second-&gt;<b>template</b> IsInstance&lt;<a class="type" href="../../../include/tvm/tir/function.h.html#tvm::tir::PrimFuncNode" title='tvm::tir::PrimFuncNode' data-ref="tvm::tir::PrimFuncNode" data-ref-filename="tvm..tir..PrimFuncNode">PrimFuncNode</a>&gt;())</td></tr>
<tr><th id="312">312</th><td>        <a class="ref fn" href="../../../../include/c++/10/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"Can only lower IR Module with PrimFuncs"</q>;</td></tr>
<tr><th id="313">313</th><td>    <b>return</b> Downcast&lt;<a class="type" href="../../../include/tvm/tir/function.h.html#tvm::tir::PrimFunc" title='tvm::tir::PrimFunc' data-ref="tvm::tir::PrimFunc" data-ref-filename="tvm..tir..PrimFunc">PrimFunc</a>&gt;(<a class="local col1 ref" href="#51kv" title='kv' data-ref="51kv" data-ref-filename="51kv">kv</a>.second);</td></tr>
<tr><th id="314">314</th><td>  });</td></tr>
<tr><th id="315">315</th><td></td></tr>
<tr><th id="316">316</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::TargetMachine' data-ref="llvm::TargetMachine" data-ref-filename="llvm..TargetMachine">TargetMachine</span>* <dfn class="local col2 decl" id="52tm" title='tm' data-type='llvm::TargetMachine *' data-ref="52tm" data-ref-filename="52tm">tm</dfn> = <a class="local col8 ref" href="#48llvm_target" title='llvm_target' data-ref="48llvm_target" data-ref-filename="48llvm_target">llvm_target</a><a class="ref fn" href="../../../include/tvm/support/with.h.html#_ZN3tvm4WithptEv" title='tvm::With::operator-&gt;' data-ref="_ZN3tvm4WithptEv" data-ref-filename="_ZN3tvm4WithptEv">-&gt;</a><a class="ref fn" href="llvm_instance.h.html#_ZN3tvm7codegen14LLVMTargetInfo24GetOrCreateTargetMachineEb" title='tvm::codegen::LLVMTargetInfo::GetOrCreateTargetMachine' data-ref="_ZN3tvm7codegen14LLVMTargetInfo24GetOrCreateTargetMachineEb" data-ref-filename="_ZN3tvm7codegen14LLVMTargetInfo24GetOrCreateTargetMachineEb">GetOrCreateTargetMachine</a>();</td></tr>
<tr><th id="317">317</th><td>  <em>const</em> <em>auto</em>* <dfn class="local col3 decl" id="53flibdevice_path" title='flibdevice_path' data-type='const tvm::runtime::PackedFunc *' data-ref="53flibdevice_path" data-ref-filename="53flibdevice_path">flibdevice_path</dfn> = <span class="namespace">tvm::runtime::</span><a class="type" href="../../../include/tvm/runtime/registry.h.html#tvm::runtime::Registry" title='tvm::runtime::Registry' data-ref="tvm::runtime::Registry" data-ref-filename="tvm..runtime..Registry">Registry</a>::<a class="ref fn" href="../../../include/tvm/runtime/registry.h.html#_ZN3tvm7runtime8Registry3GetERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='tvm::runtime::Registry::Get' data-ref="_ZN3tvm7runtime8Registry3GetERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" data-ref-filename="_ZN3tvm7runtime8Registry3GetERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE">Get</a>(<a class="ref fn fake" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" data-ref-filename="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_"></a><q>"tvm_callback_libdevice_path"</q>);</td></tr>
<tr><th id="318">318</th><td>  <b>if</b> (<a class="local col3 ref" href="#53flibdevice_path" title='flibdevice_path' data-ref="53flibdevice_path" data-ref-filename="53flibdevice_path">flibdevice_path</a> != <b>nullptr</b>) {</td></tr>
<tr><th id="319">319</th><td>    <span class="namespace">std::</span><a class="typedef" href="../../../../include/c++/10/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</a> <dfn class="local col4 decl" id="54path" title='path' data-type='std::string' data-ref="54path" data-ref-filename="54path">path</dfn> = <a class="ref fn fake" href="../../../include/tvm/runtime/packed_func.h.html#_ZNK3tvm7runtime11TVMRetValuecvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv" title='tvm::runtime::TVMRetValue::operator basic_string' data-ref="_ZNK3tvm7runtime11TVMRetValuecvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv" data-ref-filename="_ZNK3tvm7runtime11TVMRetValuecvNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEEEv"></a>(*<a class="local col3 ref" href="#53flibdevice_path" title='flibdevice_path' data-ref="53flibdevice_path" data-ref-filename="53flibdevice_path">flibdevice_path</a>)<a class="ref fn" href="../../../include/tvm/runtime/packed_func.h.html#_ZNK3tvm7runtime10PackedFuncclEDpOT_" title='tvm::runtime::PackedFunc::operator()' data-ref="_ZNK3tvm7runtime10PackedFuncclEDpOT_" data-ref-filename="_ZNK3tvm7runtime10PackedFuncclEDpOT_">(<a class="local col9 ref" href="#49compute_ver" title='compute_ver' data-ref="49compute_ver" data-ref-filename="49compute_ver">compute_ver</a>)</a>;</td></tr>
<tr><th id="320">320</th><td>    <b>if</b> (<a class="local col4 ref" href="#54path" title='path' data-ref="54path" data-ref-filename="54path">path</a>.<a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNKSt7__cxx1112basic_string6lengthEv" title='std::basic_string::length' data-ref="_ZNKSt7__cxx1112basic_string6lengthEv" data-ref-filename="_ZNKSt7__cxx1112basic_string6lengthEv">length</a>() != <var>0</var>) {</td></tr>
<tr><th id="321">321</th><td>      <span class="namespace">std::</span><a class="type" href="../../../../include/c++/10/bits/unique_ptr.h.html#std::unique_ptr" title='std::unique_ptr' data-ref="std::unique_ptr" data-ref-filename="std..unique_ptr">unique_ptr</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Module' data-ref="llvm::Module" data-ref-filename="llvm..Module">Module</span>&gt; <dfn class="local col5 decl" id="55mlib" title='mlib' data-type='std::unique_ptr&lt;llvm::Module&gt;' data-ref="55mlib" data-ref-filename="55mlib">mlib</dfn> = <a class="local col7 ref" href="#47llvm_instance" title='llvm_instance' data-ref="47llvm_instance" data-ref-filename="47llvm_instance">llvm_instance</a>.<a class="ref fn" href="llvm_instance.h.html#_ZNK3tvm7codegen12LLVMInstance6LoadIRERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='tvm::codegen::LLVMInstance::LoadIR' data-ref="_ZNK3tvm7codegen12LLVMInstance6LoadIRERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" data-ref-filename="_ZNK3tvm7codegen12LLVMInstance6LoadIRERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE">LoadIR</a>(<a class="local col4 ref" href="#54path" title='path' data-ref="54path" data-ref-filename="54path">path</a>);</td></tr>
<tr><th id="322">322</th><td>      <a class="local col5 ref" href="#55mlib" title='mlib' data-ref="55mlib" data-ref-filename="55mlib">mlib</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><span class='ref fn' title='llvm::Module::setTargetTriple' data-ref="_ZN4llvm6Module15setTargetTripleENS_9StringRefE" data-ref-filename="_ZN4llvm6Module15setTargetTripleENS_9StringRefE">setTargetTriple</span>(<span class='ref fn fake' title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" data-ref-filename="_ZN4llvm9StringRefC1ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE"></span><a class="local col8 ref" href="#48llvm_target" title='llvm_target' data-ref="48llvm_target" data-ref-filename="48llvm_target">llvm_target</a><a class="ref fn" href="../../../include/tvm/support/with.h.html#_ZN3tvm4WithptEv" title='tvm::With::operator-&gt;' data-ref="_ZN3tvm4WithptEv" data-ref-filename="_ZN3tvm4WithptEv">-&gt;</a><a class="ref fn" href="llvm_instance.h.html#_ZNK3tvm7codegen14LLVMTargetInfo15GetTargetTripleB5cxx11Ev" title='tvm::codegen::LLVMTargetInfo::GetTargetTriple' data-ref="_ZNK3tvm7codegen14LLVMTargetInfo15GetTargetTripleB5cxx11Ev" data-ref-filename="_ZNK3tvm7codegen14LLVMTargetInfo15GetTargetTripleB5cxx11Ev">GetTargetTriple</a>());</td></tr>
<tr><th id="323">323</th><td>      <a class="local col5 ref" href="#55mlib" title='mlib' data-ref="55mlib" data-ref-filename="55mlib">mlib</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><span class='ref fn' title='llvm::Module::setDataLayout' data-ref="_ZN4llvm6Module13setDataLayoutERKNS_10DataLayoutE" data-ref-filename="_ZN4llvm6Module13setDataLayoutERKNS_10DataLayoutE">setDataLayout</span>(<a class="local col2 ref" href="#52tm" title='tm' data-ref="52tm" data-ref-filename="52tm">tm</a>-&gt;<span class='ref fn' title='llvm::TargetMachine::createDataLayout' data-ref="_ZNK4llvm13TargetMachine16createDataLayoutEv" data-ref-filename="_ZNK4llvm13TargetMachine16createDataLayoutEv">createDataLayout</span>());</td></tr>
<tr><th id="324">324</th><td>      <a class="local col0 ref" href="#50cg" title='cg' data-ref="50cg" data-ref-filename="50cg">cg</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="ref fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM13AddLinkModuleEOSt10unique_ptrIN4llvm6ModuleESt14default_deleteIS4_EE" title='tvm::codegen::CodeGenLLVM::AddLinkModule' data-ref="_ZN3tvm7codegen11CodeGenLLVM13AddLinkModuleEOSt10unique_ptrIN4llvm6ModuleESt14default_deleteIS4_EE" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM13AddLinkModuleEOSt10unique_ptrIN4llvm6ModuleESt14default_deleteIS4_EE">AddLinkModule</a>(<span class="namespace">std::</span><a class="ref fn" href="../../../../include/c++/10/bits/move.h.html#_ZSt4moveOT_" title='std::move' data-ref="_ZSt4moveOT_" data-ref-filename="_ZSt4moveOT_">move</a>(<span class='refarg'><a class="local col5 ref" href="#55mlib" title='mlib' data-ref="55mlib" data-ref-filename="55mlib">mlib</a></span>));</td></tr>
<tr><th id="325">325</th><td>    }</td></tr>
<tr><th id="326">326</th><td>  }</td></tr>
<tr><th id="327">327</th><td>  <span class="namespace">std::</span><a class="type" href="../../../../include/c++/10/bits/unique_ptr.h.html#std::unique_ptr" title='std::unique_ptr' data-ref="std::unique_ptr" data-ref-filename="std..unique_ptr">unique_ptr</a>&lt;<span class="namespace">llvm::</span><span class='type' title='llvm::Module' data-ref="llvm::Module" data-ref-filename="llvm..Module">Module</span>&gt; <dfn class="local col6 decl" id="56module" title='module' data-type='std::unique_ptr&lt;llvm::Module&gt;' data-ref="56module" data-ref-filename="56module">module</dfn> = <a class="local col0 ref" href="#50cg" title='cg' data-ref="50cg" data-ref-filename="50cg">cg</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><a class="virtual ref fn" href="codegen_llvm.h.html#_ZN3tvm7codegen11CodeGenLLVM6FinishEv" title='tvm::codegen::CodeGenLLVM::Finish' data-ref="_ZN3tvm7codegen11CodeGenLLVM6FinishEv" data-ref-filename="_ZN3tvm7codegen11CodeGenLLVM6FinishEv">Finish</a>();</td></tr>
<tr><th id="328">328</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::SmallString' data-ref="llvm::SmallString" data-ref-filename="llvm..SmallString">SmallString</span>&lt;<var>8</var>&gt; <span class='ref fn fake' title='llvm::SmallString::SmallString&lt;InternalLen&gt;' data-ref="_ZN4llvm11SmallStringC1Ev" data-ref-filename="_ZN4llvm11SmallStringC1Ev"></span><dfn class="local col7 decl" id="57data_ptx" title='data_ptx' data-type='llvm::SmallString&lt;8&gt;' data-ref="57data_ptx" data-ref-filename="57data_ptx">data_ptx</dfn>, <span class='ref fn fake' title='llvm::SmallString::SmallString&lt;InternalLen&gt;' data-ref="_ZN4llvm11SmallStringC1Ev" data-ref-filename="_ZN4llvm11SmallStringC1Ev"></span><dfn class="local col8 decl" id="58data_ll" title='data_ll' data-type='llvm::SmallString&lt;8&gt;' data-ref="58data_ll" data-ref-filename="58data_ll">data_ll</dfn>;</td></tr>
<tr><th id="329">329</th><td>  <span class="namespace">llvm::</span><span class='type' title='llvm::raw_svector_ostream' data-ref="llvm::raw_svector_ostream" data-ref-filename="llvm..raw_svector_ostream">raw_svector_ostream</span> <dfn class="local col9 decl" id="59dest_ptx" title='dest_ptx' data-type='llvm::raw_svector_ostream' data-ref="59dest_ptx" data-ref-filename="59dest_ptx">dest_ptx</dfn><span class='ref fn' title='llvm::raw_svector_ostream::raw_svector_ostream' data-ref="_ZN4llvm19raw_svector_ostreamC1ERNS_15SmallVectorImplIcEE" data-ref-filename="_ZN4llvm19raw_svector_ostreamC1ERNS_15SmallVectorImplIcEE">(</span><a class="local col7 ref" href="#57data_ptx" title='data_ptx' data-ref="57data_ptx" data-ref-filename="57data_ptx">data_ptx</a>), <dfn class="local col0 decl" id="60dest_ll" title='dest_ll' data-type='llvm::raw_svector_ostream' data-ref="60dest_ll" data-ref-filename="60dest_ll">dest_ll</dfn><span class='ref fn' title='llvm::raw_svector_ostream::raw_svector_ostream' data-ref="_ZN4llvm19raw_svector_ostreamC1ERNS_15SmallVectorImplIcEE" data-ref-filename="_ZN4llvm19raw_svector_ostreamC1ERNS_15SmallVectorImplIcEE">(</span><a class="local col8 ref" href="#58data_ll" title='data_ll' data-ref="58data_ll" data-ref-filename="58data_ll">data_ll</a>);</td></tr>
<tr><th id="330">330</th><td>  <a class="local col9 ref" href="#59dest_ptx" title='dest_ptx' data-ref="59dest_ptx" data-ref-filename="59dest_ptx">dest_ptx</a>.<span class='ref fn' title='llvm::raw_ostream::SetUnbuffered' data-ref="_ZN4llvm11raw_ostream13SetUnbufferedEv" data-ref-filename="_ZN4llvm11raw_ostream13SetUnbufferedEv">SetUnbuffered</span>();</td></tr>
<tr><th id="331">331</th><td>  <a class="local col0 ref" href="#60dest_ll" title='dest_ll' data-ref="60dest_ll" data-ref-filename="60dest_ll">dest_ll</a>.<span class='ref fn' title='llvm::raw_ostream::SetUnbuffered' data-ref="_ZN4llvm11raw_ostream13SetUnbufferedEv" data-ref-filename="_ZN4llvm11raw_ostream13SetUnbufferedEv">SetUnbuffered</span>();</td></tr>
<tr><th id="332">332</th><td>  <i>// print ll</i></td></tr>
<tr><th id="333">333</th><td>  <a class="local col6 ref" href="#56module" title='module' data-ref="56module" data-ref-filename="56module">module</a><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrptEv" title='std::unique_ptr::operator-&gt;' data-ref="_ZNKSt10unique_ptrptEv" data-ref-filename="_ZNKSt10unique_ptrptEv">-&gt;</a><span class='ref fn' title='llvm::Module::print' data-ref="_ZNK4llvm6Module5printERNS_11raw_ostreamEPNS_24AssemblyAnnotationWriterEbb" data-ref-filename="_ZNK4llvm6Module5printERNS_11raw_ostreamEPNS_24AssemblyAnnotationWriterEbb">print</span>(<span class='refarg'><a class="local col0 ref" href="#60dest_ll" title='dest_ll' data-ref="60dest_ll" data-ref-filename="60dest_ll">dest_ll</a></span>, <b>nullptr</b>);</td></tr>
<tr><th id="334">334</th><td>  <span class="namespace">std::</span><a class="typedef" href="../../../../include/c++/10/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</a> <dfn class="local col1 decl" id="61ll" title='ll' data-type='std::string' data-ref="61ll" data-ref-filename="61ll">ll</dfn><a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1ETL0__S1_RKT1_" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1ETL0__S1_RKT1_" data-ref-filename="_ZNSt7__cxx1112basic_stringC1ETL0__S1_RKT1_">(</a><a class="local col8 ref" href="#58data_ll" title='data_ll' data-ref="58data_ll" data-ref-filename="58data_ll">data_ll</a>.<span class='ref fn' title='llvm::SmallVectorTemplateCommon::begin' data-ref="_ZN4llvm25SmallVectorTemplateCommon5beginEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon5beginEv">begin</span>(), <a class="local col8 ref" href="#58data_ll" title='data_ll' data-ref="58data_ll" data-ref-filename="58data_ll">data_ll</a>.<span class='ref fn' title='llvm::SmallVectorTemplateCommon::end' data-ref="_ZN4llvm25SmallVectorTemplateCommon3endEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon3endEv">end</span>());</td></tr>
<tr><th id="335">335</th><td>  <i>// emit ptx</i></td></tr>
<tr><th id="336">336</th><td>  <span class="namespace">llvm::legacy::</span><span class='type' title='llvm::legacy::PassManager' data-ref="llvm::legacy::PassManager" data-ref-filename="llvm..legacy..PassManager">PassManager</span> <span class='ref fn fake' title='llvm::legacy::PassManager::PassManager' data-ref="_ZN4llvm6legacy11PassManagerC1Ev" data-ref-filename="_ZN4llvm6legacy11PassManagerC1Ev"></span><dfn class="local col2 decl" id="62pass" title='pass' data-type='llvm::legacy::PassManager' data-ref="62pass" data-ref-filename="62pass">pass</dfn>;</td></tr>
<tr><th id="337">337</th><td><u>#<span data-ppcond="337">if</span> <span class="macro" title="140" data-ref="_M/TVM_LLVM_VERSION">TVM_LLVM_VERSION</span> &lt;= 60</u></td></tr>
<tr><th id="338">338</th><td>  ICHECK(tm-&gt;addPassesToEmitFile(pass, dest_ptx, llvm::TargetMachine::CGFT_AssemblyFile) == <var>0</var>)</td></tr>
<tr><th id="339">339</th><td>      &lt;&lt; <q>"Cannot emit target CGFT_ObjectFile"</q>;</td></tr>
<tr><th id="340">340</th><td><u>#<span data-ppcond="337">elif</span> <span class="macro" title="140" data-ref="_M/TVM_LLVM_VERSION">TVM_LLVM_VERSION</span> &lt;= 90</u></td></tr>
<tr><th id="341">341</th><td>  ICHECK(tm-&gt;addPassesToEmitFile(pass, dest_ptx, <b>nullptr</b>, llvm::TargetMachine::CGFT_AssemblyFile) ==</td></tr>
<tr><th id="342">342</th><td>         <var>0</var>)</td></tr>
<tr><th id="343">343</th><td>      &lt;&lt; <q>"Cannot emit target CGFT_ObjectFile"</q>;</td></tr>
<tr><th id="344">344</th><td><u>#<span data-ppcond="337">else</span></u></td></tr>
<tr><th id="345">345</th><td>  <a class="macro" href="../../../include/tvm/runtime/logging.h.html#680" title="if (!(tm-&gt;addPassesToEmitFile(pass, dest_ptx, nullptr, llvm::CGFT_AssemblyFile) == 0)) ::tvm::runtime::detail::LogFatal(&quot;/home/runner/work/tvm-woboq/tvm-woboq/tvm/src/target/llvm/codegen_nvptx.cc&quot;, 345).stream() &lt;&lt; ::tvm::runtime::detail::kTVM_INTERNAL_ERROR_MESSAGE &lt;&lt; &quot;  &quot; &lt;&lt; &quot;Check failed: (&quot; &quot;tm-&gt;addPassesToEmitFile(pass, dest_ptx, nullptr, llvm::CGFT_AssemblyFile) == 0&quot; &lt;&lt; &quot;) is false: &quot;" data-ref="_M/ICHECK">ICHECK</a>(<a class="local col2 ref" href="#52tm" title='tm' data-ref="52tm" data-ref-filename="52tm">tm</a>-&gt;<span class='virtual ref fn' title='llvm::TargetMachine::addPassesToEmitFile' data-ref="_ZN4llvm13TargetMachine19addPassesToEmitFileERNS_6legacy15PassManagerBaseERNS_17raw_pwrite_streamEPS4_NS_15CodeGenFileTypeEbPNS_28MachineModuleInfoWrapperPassE" data-ref-filename="_ZN4llvm13TargetMachine19addPassesToEmitFileERNS_6legacy15PassManagerBaseERNS_17raw_pwrite_streamEPS4_NS_15CodeGenFileTypeEbPNS_28MachineModuleInfoWrapperPassE">addPassesToEmitFile</span>(<span class='refarg'><a class="local col2 ref" href="#62pass" title='pass' data-ref="62pass" data-ref-filename="62pass">pass</a></span>, <span class='refarg'><a class="local col9 ref" href="#59dest_ptx" title='dest_ptx' data-ref="59dest_ptx" data-ref-filename="59dest_ptx">dest_ptx</a></span>, <b>nullptr</b>, llvm::<span class='enum' title='llvm::CGFT_AssemblyFile' data-ref="llvm::CGFT_AssemblyFile" data-ref-filename="llvm..CGFT_AssemblyFile">CGFT_AssemblyFile</span>) == <var>0</var>)</td></tr>
<tr><th id="346">346</th><td>      <a class="ref fn" href="../../../../include/c++/10/ostream.html#_ZStlsRSt13basic_ostreamIcT_EPKc" title='std::operator&lt;&lt;' data-ref="_ZStlsRSt13basic_ostreamIcT_EPKc" data-ref-filename="_ZStlsRSt13basic_ostreamIcT_EPKc">&lt;&lt;</a> <q>"Cannot emit target CGFT_ObjectFile"</q>;</td></tr>
<tr><th id="347">347</th><td><u>#<span data-ppcond="337">endif</span></u></td></tr>
<tr><th id="348">348</th><td>  <a class="local col2 ref" href="#62pass" title='pass' data-ref="62pass" data-ref-filename="62pass">pass</a>.<span class='ref fn' title='llvm::legacy::PassManager::run' data-ref="_ZN4llvm6legacy11PassManager3runERNS_6ModuleE" data-ref-filename="_ZN4llvm6legacy11PassManager3runERNS_6ModuleE">run</span>(<span class='refarg'><a class="ref fn" href="../../../../include/c++/10/bits/unique_ptr.h.html#_ZNKSt10unique_ptrdeEv" title='std::unique_ptr::operator*' data-ref="_ZNKSt10unique_ptrdeEv" data-ref-filename="_ZNKSt10unique_ptrdeEv">*</a><a class="local col6 ref" href="#56module" title='module' data-ref="56module" data-ref-filename="56module">module</a></span>);</td></tr>
<tr><th id="349">349</th><td>  <span class="namespace">std::</span><a class="typedef" href="../../../../include/c++/10/bits/stringfwd.h.html#std::string" title='std::string' data-type='basic_string&lt;char&gt;' data-ref="std::string" data-ref-filename="std..string">string</a> <dfn class="local col3 decl" id="63ptx" title='ptx' data-type='std::string' data-ref="63ptx" data-ref-filename="63ptx">ptx</dfn><a class="ref fn" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1ETL0__S1_RKT1_" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1ETL0__S1_RKT1_" data-ref-filename="_ZNSt7__cxx1112basic_stringC1ETL0__S1_RKT1_">(</a><a class="local col7 ref" href="#57data_ptx" title='data_ptx' data-ref="57data_ptx" data-ref-filename="57data_ptx">data_ptx</a>.<span class='ref fn' title='llvm::SmallVectorTemplateCommon::begin' data-ref="_ZN4llvm25SmallVectorTemplateCommon5beginEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon5beginEv">begin</span>(), <a class="local col7 ref" href="#57data_ptx" title='data_ptx' data-ref="57data_ptx" data-ref-filename="57data_ptx">data_ptx</a>.<span class='ref fn' title='llvm::SmallVectorTemplateCommon::end' data-ref="_ZN4llvm25SmallVectorTemplateCommon3endEv" data-ref-filename="_ZN4llvm25SmallVectorTemplateCommon3endEv">end</span>());</td></tr>
<tr><th id="350">350</th><td>  <b>return</b> <a class="ref fn" href="../../runtime/cuda/cuda_module.h.html#_ZN3tvm7runtime16CUDAModuleCreateENSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEES6_St13unordered_mapIS6_NS0_12FunctionInfoESt4hashIS6_ESt8equal_12001223" title='tvm::runtime::CUDAModuleCreate' data-ref="_ZN3tvm7runtime16CUDAModuleCreateENSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEES6_St13unordered_mapIS6_NS0_12FunctionInfoESt4hashIS6_ESt8equal_12001223" data-ref-filename="_ZN3tvm7runtime16CUDAModuleCreateENSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEES6_St13unordered_mapIS6_NS0_12FunctionInfoESt4hashIS6_ESt8equal_12001223">CUDAModuleCreate</a>(<a class="ref fn fake" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1ERKNS_12basic_stringIT_T0_T1_EE" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1ERKNS_12basic_stringIT_T0_T1_EE" data-ref-filename="_ZNSt7__cxx1112basic_stringC1ERKNS_12basic_stringIT_T0_T1_EE"></a><a class="local col3 ref" href="#63ptx" title='ptx' data-ref="63ptx" data-ref-filename="63ptx">ptx</a>, <a class="ref fn fake" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" data-ref-filename="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_"></a><q>"ptx"</q>, <a class="ref fn" href="../build_common.h.html#_ZN3tvm7codegen15ExtractFuncInfoB5cxx11ERKNS_8IRModuleE" title='tvm::codegen::ExtractFuncInfo' data-ref="_ZN3tvm7codegen15ExtractFuncInfoB5cxx11ERKNS_8IRModuleE" data-ref-filename="_ZN3tvm7codegen15ExtractFuncInfoB5cxx11ERKNS_8IRModuleE">ExtractFuncInfo</a>(<a class="local col5 ref" href="#45mod" title='mod' data-ref="45mod" data-ref-filename="45mod">mod</a>), <a class="ref fn fake" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1ERKNS_12basic_stringIT_T0_T1_EE" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1ERKNS_12basic_stringIT_T0_T1_EE" data-ref-filename="_ZNSt7__cxx1112basic_stringC1ERKNS_12basic_stringIT_T0_T1_EE"></a><a class="local col1 ref" href="#61ll" title='ll' data-ref="61ll" data-ref-filename="61ll">ll</a>);</td></tr>
<tr><th id="351">351</th><td>}</td></tr>
<tr><th id="352">352</th><td></td></tr>
<tr><th id="353">353</th><td><a class="macro" href="../../../include/tvm/runtime/registry.h.html#339" title="static __attribute__((unused)) ::tvm::runtime::Registry&amp; __mk_TVM0 = ::tvm::runtime::Registry::Register(&quot;target.build.nvptx&quot;)" data-ref="_M/TVM_REGISTER_GLOBAL">TVM_REGISTER_GLOBAL</a>(<a class="ref fn fake" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" data-ref-filename="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_"></a><q>"target.build.nvptx"</q>).<a class="ref fn" href="../../../include/tvm/runtime/registry.h.html#_ZN3tvm7runtime8Registry14set_body_typedET_" title='tvm::runtime::Registry::set_body_typed' data-ref="_ZN3tvm7runtime8Registry14set_body_typedET_" data-ref-filename="_ZN3tvm7runtime8Registry14set_body_typedET_">set_body_typed</a>(<a class="ref fn" href="#_ZN3tvm7codegen10BuildNVPTXENS_8IRModuleENS_6TargetE" title='tvm::codegen::BuildNVPTX' data-ref="_ZN3tvm7codegen10BuildNVPTXENS_8IRModuleENS_6TargetE" data-ref-filename="_ZN3tvm7codegen10BuildNVPTXENS_8IRModuleENS_6TargetE">BuildNVPTX</a>);</td></tr>
<tr><th id="354">354</th><td></td></tr>
<tr><th id="355">355</th><td><a class="macro" href="../../../include/tvm/runtime/registry.h.html#339" title="static __attribute__((unused)) ::tvm::runtime::Registry&amp; __mk_TVM2 = ::tvm::runtime::Registry::Register(&quot;tvm.codegen.llvm.target_nvptx&quot;)" data-ref="_M/TVM_REGISTER_GLOBAL">TVM_REGISTER_GLOBAL</a>(<a class="ref fn fake" href="../../../../include/c++/10/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" title='std::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_" data-ref-filename="_ZNSt7__cxx1112basic_stringC1EPKT_RKT1_"></a><q>"tvm.codegen.llvm.target_nvptx"</q>)</td></tr>
<tr><th id="356">356</th><td>    .<a class="tu ref fn" href="../../../include/tvm/runtime/registry.h.html#_ZN3tvm7runtime8Registry8set_bodyET_" title='tvm::runtime::Registry::set_body' data-use='c' data-ref="_ZN3tvm7runtime8Registry8set_bodyET_" data-ref-filename="_ZN3tvm7runtime8Registry8set_bodyET_">set_body</a>([](<em>const</em> TVMArgs&amp; <dfn class="local col4 decl" id="64targs" title='targs' data-type='const tvm::runtime::TVMArgs &amp;' data-ref="64targs" data-ref-filename="64targs">targs</dfn>, TVMRetValue* <dfn class="local col5 decl" id="65rv" title='rv' data-type='tvm::runtime::TVMRetValue *' data-ref="65rv" data-ref-filename="65rv">rv</dfn>) {</td></tr>
<tr><th id="357">357</th><td>      *<a class="local col5 ref" href="#65rv" title='rv' data-ref="65rv" data-ref-filename="65rv">rv</a> <a class="ref fn" href="../../../include/tvm/runtime/packed_func.h.html#_ZN3tvm7runtime11TVMRetValueaSEPv" title='tvm::runtime::TVMRetValue::operator=' data-ref="_ZN3tvm7runtime11TVMRetValueaSEPv" data-ref-filename="_ZN3tvm7runtime11TVMRetValueaSEPv">=</a> <b>static_cast</b>&lt;<em>void</em>*&gt;(<b>new</b> <a class="type" href="#tvm::codegen::CodeGenNVPTX" title='tvm::codegen::CodeGenNVPTX' data-ref="tvm::codegen::CodeGenNVPTX" data-ref-filename="tvm..codegen..CodeGenNVPTX">CodeGenNVPTX</a><a class="tu ref fn" href="#65" title='tvm::codegen::CodeGenNVPTX::CodeGenNVPTX' data-use='c' data-ref="_ZN3tvm7codegen12CodeGenNVPTXC1Ev" data-ref-filename="_ZN3tvm7codegen12CodeGenNVPTXC1Ev">(</a>));</td></tr>
<tr><th id="358">358</th><td>    });</td></tr>
<tr><th id="359">359</th><td></td></tr>
<tr><th id="360">360</th><td>}  <i>// namespace codegen</i></td></tr>
<tr><th id="361">361</th><td>}  <i>// namespace tvm</i></td></tr>
<tr><th id="362">362</th><td></td></tr>
<tr><th id="363">363</th><td><u>#<span data-ppcond="24">endif</span>  // TVM_LLVM_VERSION</u></td></tr>
<tr><th id="364">364</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2022-Oct-15</em> from project tvm revision <em>5e862d4</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
