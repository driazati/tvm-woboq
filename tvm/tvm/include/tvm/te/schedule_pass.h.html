<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>schedule_pass.h source code [tvm/include/tvm/te/schedule_pass.h] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../.././data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../.././data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../.././data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../.././data/jquery/jquery-ui.min.js"></script>
<script>var file = 'tvm/include/tvm/te/schedule_pass.h'; var root_path = '../../../..'; var data_path = '../../../.././data'; var ecma_script_api_version = 2;</script>
<script src='../../../.././data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>tvm</a>/<a href='../..'>include</a>/<a href='..'>tvm</a>/<a href='./'>te</a>/<a href='schedule_pass.h.html'>schedule_pass.h</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>/*</i></td></tr>
<tr><th id="2">2</th><td><i> * Licensed to the Apache Software Foundation (ASF) under one</i></td></tr>
<tr><th id="3">3</th><td><i> * or more contributor license agreements.  See the NOTICE file</i></td></tr>
<tr><th id="4">4</th><td><i> * distributed with this work for additional information</i></td></tr>
<tr><th id="5">5</th><td><i> * regarding copyright ownership.  The ASF licenses this file</i></td></tr>
<tr><th id="6">6</th><td><i> * to you under the Apache License, Version 2.0 (the</i></td></tr>
<tr><th id="7">7</th><td><i> * "License"); you may not use this file except in compliance</i></td></tr>
<tr><th id="8">8</th><td><i> * with the License.  You may obtain a copy of the License at</i></td></tr>
<tr><th id="9">9</th><td><i> *</i></td></tr>
<tr><th id="10">10</th><td><i> *   <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></i></td></tr>
<tr><th id="11">11</th><td><i> *</i></td></tr>
<tr><th id="12">12</th><td><i> * Unless required by applicable law or agreed to in writing,</i></td></tr>
<tr><th id="13">13</th><td><i> * software distributed under the License is distributed on an</i></td></tr>
<tr><th id="14">14</th><td><i> * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</i></td></tr>
<tr><th id="15">15</th><td><i> * KIND, either express or implied.  See the License for the</i></td></tr>
<tr><th id="16">16</th><td><i> * specific language governing permissions and limitations</i></td></tr>
<tr><th id="17">17</th><td><i> * under the License.</i></td></tr>
<tr><th id="18">18</th><td><i> */</i></td></tr>
<tr><th id="19">19</th><td></td></tr>
<tr><th id="20">20</th><td><i class="doc">/*!</i></td></tr>
<tr><th id="21">21</th><td><i class="doc"> * <span class="command">\file</span> <span class="verb">tvm/te/schedule_pass.h</span></i></td></tr>
<tr><th id="22">22</th><td><i class="doc"> * <span class="command">\brief</span>  Collection of Schedule pass functions.</i></td></tr>
<tr><th id="23">23</th><td><i class="doc"> *</i></td></tr>
<tr><th id="24">24</th><td><i class="doc"> *  These passes works on the schedule hyper-graph</i></td></tr>
<tr><th id="25">25</th><td><i class="doc"> *  and infers information such as bounds, check conditions</i></td></tr>
<tr><th id="26">26</th><td><i class="doc"> *  read/write dependencies between the IterVar</i></td></tr>
<tr><th id="27">27</th><td><i class="doc"> */</i></td></tr>
<tr><th id="28">28</th><td><u>#<span data-ppcond="28">ifndef</span> <span class="macro" data-ref="_M/TVM_TE_SCHEDULE_PASS_H_">TVM_TE_SCHEDULE_PASS_H_</span></u></td></tr>
<tr><th id="29">29</th><td><u>#define <dfn class="macro" id="_M/TVM_TE_SCHEDULE_PASS_H_" data-ref="_M/TVM_TE_SCHEDULE_PASS_H_">TVM_TE_SCHEDULE_PASS_H_</dfn></u></td></tr>
<tr><th id="30">30</th><td></td></tr>
<tr><th id="31">31</th><td><u>#include <a href="schedule.h.html">&lt;tvm/te/schedule.h&gt;</a></u></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="../tir/function.h.html">&lt;tvm/tir/function.h&gt;</a></u></td></tr>
<tr><th id="33">33</th><td></td></tr>
<tr><th id="34">34</th><td><b>namespace</b> <span class="namespace">tvm</span> {</td></tr>
<tr><th id="35">35</th><td><b>namespace</b> <span class="namespace">te</span> {</td></tr>
<tr><th id="36">36</th><td></td></tr>
<tr><th id="37">37</th><td><i class="doc">/*!</i></td></tr>
<tr><th id="38">38</th><td><i class="doc"> * <span class="command">\brief</span> To automatically inline the element-wise operations.</i></td></tr>
<tr><th id="39">39</th><td><i class="doc"> *</i></td></tr>
<tr><th id="40">40</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">sch</span> The schedule to be inlined.</i></td></tr>
<tr><th id="41">41</th><td><i class="doc"> */</i></td></tr>
<tr><th id="42">42</th><td><em>void</em> <dfn class="decl fn" id="_ZN3tvm2te18AutoInlineElemWiseENS0_8ScheduleE" title='tvm::te::AutoInlineElemWise' data-ref="_ZN3tvm2te18AutoInlineElemWiseENS0_8ScheduleE" data-ref-filename="_ZN3tvm2te18AutoInlineElemWiseENS0_8ScheduleE">AutoInlineElemWise</dfn>(<a class="type" href="schedule.h.html#tvm::te::Schedule" title='tvm::te::Schedule' data-ref="tvm::te::Schedule" data-ref-filename="tvm..te..Schedule">Schedule</a> <dfn class="local col5 decl" id="235sch" title='sch' data-type='tvm::te::Schedule' data-ref="235sch" data-ref-filename="235sch">sch</dfn>);</td></tr>
<tr><th id="43">43</th><td></td></tr>
<tr><th id="44">44</th><td><i class="doc">/*!</i></td></tr>
<tr><th id="45">45</th><td><i class="doc"> * <span class="command">\brief</span> To automatically inline the broadcast operations.</i></td></tr>
<tr><th id="46">46</th><td><i class="doc"> *</i></td></tr>
<tr><th id="47">47</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">sch</span> The schedule to be inlined.</i></td></tr>
<tr><th id="48">48</th><td><i class="doc"> */</i></td></tr>
<tr><th id="49">49</th><td><em>void</em> <dfn class="decl fn" id="_ZN3tvm2te19AutoInlineBroarcastENS0_8ScheduleE" title='tvm::te::AutoInlineBroarcast' data-ref="_ZN3tvm2te19AutoInlineBroarcastENS0_8ScheduleE" data-ref-filename="_ZN3tvm2te19AutoInlineBroarcastENS0_8ScheduleE">AutoInlineBroarcast</dfn>(<a class="type" href="schedule.h.html#tvm::te::Schedule" title='tvm::te::Schedule' data-ref="tvm::te::Schedule" data-ref-filename="tvm..te..Schedule">Schedule</a> <dfn class="local col6 decl" id="236sch" title='sch' data-type='tvm::te::Schedule' data-ref="236sch" data-ref-filename="236sch">sch</dfn>);</td></tr>
<tr><th id="50">50</th><td></td></tr>
<tr><th id="51">51</th><td><i class="doc">/*!</i></td></tr>
<tr><th id="52">52</th><td><i class="doc"> * <span class="command">\brief</span> To automatically inline operations with injective writes</i></td></tr>
<tr><th id="53">53</th><td><i class="doc"> *   (i.e. writes without reduction or sequential loops). Note</i></td></tr>
<tr><th id="54">54</th><td><i class="doc"> *   that in this case, guarantees about contiguity, transpose, stride,</i></td></tr>
<tr><th id="55">55</th><td><i class="doc"> *   alignemnt and memory footprint in general do not hold.</i></td></tr>
<tr><th id="56">56</th><td><i class="doc"> *</i></td></tr>
<tr><th id="57">57</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">sch</span> The schedule to be inlined.</i></td></tr>
<tr><th id="58">58</th><td><i class="doc"> */</i></td></tr>
<tr><th id="59">59</th><td><a class="macro" href="../runtime/c_runtime_api.h.html#64" title="__attribute__((visibility(&quot;default&quot;)))" data-ref="_M/TVM_DLL">TVM_DLL</a> <em>void</em> <dfn class="decl fn" id="_ZN3tvm2te19AutoInlineInjectiveENS0_8ScheduleE" title='tvm::te::AutoInlineInjective' data-ref="_ZN3tvm2te19AutoInlineInjectiveENS0_8ScheduleE" data-ref-filename="_ZN3tvm2te19AutoInlineInjectiveENS0_8ScheduleE">AutoInlineInjective</dfn>(<a class="type" href="schedule.h.html#tvm::te::Schedule" title='tvm::te::Schedule' data-ref="tvm::te::Schedule" data-ref-filename="tvm..te..Schedule">Schedule</a> <dfn class="local col7 decl" id="237sch" title='sch' data-type='tvm::te::Schedule' data-ref="237sch" data-ref-filename="237sch">sch</dfn>);</td></tr>
<tr><th id="60">60</th><td></td></tr>
<tr><th id="61">61</th><td><i class="doc">/*!</i></td></tr>
<tr><th id="62">62</th><td><i class="doc"> * <span class="command">\brief</span> Infer the bound of all iteration variables relates to the schedule.</i></td></tr>
<tr><th id="63">63</th><td><i class="doc"> *</i></td></tr>
<tr><th id="64">64</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">sch</span> The root schedule to infer all the bounds.</i></td></tr>
<tr><th id="65">65</th><td><i class="doc"> * <span class="command">\return</span> the result bound of the iteration Variable</i></td></tr>
<tr><th id="66">66</th><td><i class="doc"> */</i></td></tr>
<tr><th id="67">67</th><td><a class="type" href="../runtime/container/map.h.html#tvm::runtime::Map" title='tvm::runtime::Map' data-ref="tvm::runtime::Map" data-ref-filename="tvm..runtime..Map">Map</a>&lt;<a class="type" href="../tir/var.h.html#tvm::tir::IterVar" title='tvm::tir::IterVar' data-ref="tvm::tir::IterVar" data-ref-filename="tvm..tir..IterVar">IterVar</a>, <a class="type" href="../ir/expr.h.html#tvm::Range" title='tvm::Range' data-ref="tvm::Range" data-ref-filename="tvm..Range">Range</a>&gt; <dfn class="decl fn" id="_ZN3tvm2te10InferBoundERKNS0_8ScheduleE" title='tvm::te::InferBound' data-ref="_ZN3tvm2te10InferBoundERKNS0_8ScheduleE" data-ref-filename="_ZN3tvm2te10InferBoundERKNS0_8ScheduleE">InferBound</dfn>(<em>const</em> <a class="type" href="schedule.h.html#tvm::te::Schedule" title='tvm::te::Schedule' data-ref="tvm::te::Schedule" data-ref-filename="tvm..te..Schedule">Schedule</a>&amp; <dfn class="local col8 decl" id="238sch" title='sch' data-type='const tvm::te::Schedule &amp;' data-ref="238sch" data-ref-filename="238sch">sch</dfn>);</td></tr>
<tr><th id="68">68</th><td></td></tr>
<tr><th id="69">69</th><td><i class="doc">/*!</i></td></tr>
<tr><th id="70">70</th><td><i class="doc"> * <span class="command">\brief</span> Verify if there is any argument bound to compact buffer.</i></td></tr>
<tr><th id="71">71</th><td><i class="doc"> *</i></td></tr>
<tr><th id="72">72</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">stmt</span> The stmt to be verified.</i></td></tr>
<tr><th id="73">73</th><td><i class="doc"> * <span class="command">\return</span> true if there is any buffer_bind_scope attribute found,</i></td></tr>
<tr><th id="74">74</th><td><i class="doc"> *        otherwise, false.</i></td></tr>
<tr><th id="75">75</th><td><i class="doc"> */</i></td></tr>
<tr><th id="76">76</th><td><em>bool</em> <dfn class="decl fn" id="_ZN3tvm2te19VerifyCompactBufferERKNS_3tir4StmtE" title='tvm::te::VerifyCompactBuffer' data-ref="_ZN3tvm2te19VerifyCompactBufferERKNS_3tir4StmtE" data-ref-filename="_ZN3tvm2te19VerifyCompactBufferERKNS_3tir4StmtE">VerifyCompactBuffer</dfn>(<em>const</em> <a class="type" href="../tir/stmt.h.html#tvm::tir::Stmt" title='tvm::tir::Stmt' data-ref="tvm::tir::Stmt" data-ref-filename="tvm..tir..Stmt">Stmt</a>&amp; <dfn class="local col9 decl" id="239stmt" title='stmt' data-type='const tvm::tir::Stmt &amp;' data-ref="239stmt" data-ref-filename="239stmt">stmt</dfn>);</td></tr>
<tr><th id="77">77</th><td></td></tr>
<tr><th id="78">78</th><td><i class="doc">/*!</i></td></tr>
<tr><th id="79">79</th><td><i class="doc"> * <span class="command">\brief</span> Schedule s' dependent operations.</i></td></tr>
<tr><th id="80">80</th><td><i class="doc"> *</i></td></tr>
<tr><th id="81">81</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">s</span> The schedule to be realized</i></td></tr>
<tr><th id="82">82</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">dom_map</span> The domain of each iter vars.</i></td></tr>
<tr><th id="83">83</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">debug_keep_trivial_loop</span> Whether keep trivial loops with extent of 1 during lowering.</i></td></tr>
<tr><th id="84">84</th><td><i class="doc"> *                                This is a debug feature for dataflow/axis analysis.</i></td></tr>
<tr><th id="85">85</th><td><i class="doc"> *                                Note: If this is true, The lowered IR may be incorrect,</i></td></tr>
<tr><th id="86">86</th><td><i class="doc"> *                                because we will also delete the init part of reduction</i></td></tr>
<tr><th id="87">87</th><td><i class="doc"> * <span class="command">\return</span> the result Stmt</i></td></tr>
<tr><th id="88">88</th><td><i class="doc"> */</i></td></tr>
<tr><th id="89">89</th><td><a class="type" href="../tir/stmt.h.html#tvm::tir::Stmt" title='tvm::tir::Stmt' data-ref="tvm::tir::Stmt" data-ref-filename="tvm..tir..Stmt">Stmt</a> <dfn class="decl fn" id="_ZN3tvm2te11ScheduleOpsENS0_8ScheduleENS_7runtime3MapINS_3tir7IterVarENS_5RangeEvvEEb" title='tvm::te::ScheduleOps' data-ref="_ZN3tvm2te11ScheduleOpsENS0_8ScheduleENS_7runtime3MapINS_3tir7IterVarENS_5RangeEvvEEb" data-ref-filename="_ZN3tvm2te11ScheduleOpsENS0_8ScheduleENS_7runtime3MapINS_3tir7IterVarENS_5RangeEvvEEb">ScheduleOps</dfn>(<a class="type" href="schedule.h.html#tvm::te::Schedule" title='tvm::te::Schedule' data-ref="tvm::te::Schedule" data-ref-filename="tvm..te..Schedule">Schedule</a> <dfn class="local col0 decl" id="240s" title='s' data-type='tvm::te::Schedule' data-ref="240s" data-ref-filename="240s">s</dfn>, <a class="type" href="../runtime/container/map.h.html#tvm::runtime::Map" title='tvm::runtime::Map' data-ref="tvm::runtime::Map" data-ref-filename="tvm..runtime..Map">Map</a>&lt;<a class="type" href="../tir/var.h.html#tvm::tir::IterVar" title='tvm::tir::IterVar' data-ref="tvm::tir::IterVar" data-ref-filename="tvm..tir..IterVar">IterVar</a>, <a class="type" href="../ir/expr.h.html#tvm::Range" title='tvm::Range' data-ref="tvm::Range" data-ref-filename="tvm..Range">Range</a>&gt; <dfn class="local col1 decl" id="241dom_map" title='dom_map' data-type='Map&lt;tvm::tir::IterVar, tvm::Range&gt;' data-ref="241dom_map" data-ref-filename="241dom_map">dom_map</dfn>, <em>bool</em> <dfn class="local col2 decl" id="242debug_keep_trivial_loop" title='debug_keep_trivial_loop' data-type='bool' data-ref="242debug_keep_trivial_loop" data-ref-filename="242debug_keep_trivial_loop">debug_keep_trivial_loop</dfn>);</td></tr>
<tr><th id="90">90</th><td></td></tr>
<tr><th id="91">91</th><td><i class="doc">/*!</i></td></tr>
<tr><th id="92">92</th><td><i class="doc"> * <span class="command">\brief</span> Postprocessing the Stmt generated by ScheduleOps to create</i></td></tr>
<tr><th id="93">93</th><td><i class="doc"> *        a PrimFunc that can then be used for further TIR optimizations.</i></td></tr>
<tr><th id="94">94</th><td><i class="doc"> *</i></td></tr>
<tr><th id="95">95</th><td><i class="doc"> *  Perform this translation before running any TIR optimizations.</i></td></tr>
<tr><th id="96">96</th><td><i class="doc"> *</i></td></tr>
<tr><th id="97">97</th><td><i class="doc"> *  List of actions taken by the function:</i></td></tr>
<tr><th id="98">98</th><td><i class="doc"> *  - Remove occurrences of te::Tensor, te::Operation in the IR</i></td></tr>
<tr><th id="99">99</th><td><i class="doc"> *    and replace them by corresponding IR nodes via tir::Buffer.</i></td></tr>
<tr><th id="100">100</th><td><i class="doc"> *  - Add annotation of extern buffers using the buffer_map field</i></td></tr>
<tr><th id="101">101</th><td><i class="doc"> *    in the PrimFunc type.</i></td></tr>
<tr><th id="102">102</th><td><i class="doc"> *</i></td></tr>
<tr><th id="103">103</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">arg_list</span> Array of Tensor/Var/Buffer arguments to the function.</i></td></tr>
<tr><th id="104">104</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">body</span> The body of the function.</i></td></tr>
<tr><th id="105">105</th><td><i class="doc"> * <span class="command">\param</span> <span class="arg">bindings</span> potential Tensor to Buffer bindings for the Tensors in the body.</i></td></tr>
<tr><th id="106">106</th><td><i class="doc"> */</i></td></tr>
<tr><th id="107">107</th><td><a class="type" href="../tir/function.h.html#tvm::tir::PrimFunc" title='tvm::tir::PrimFunc' data-ref="tvm::tir::PrimFunc" data-ref-filename="tvm..tir..PrimFunc">PrimFunc</a> <dfn class="decl fn" id="_ZN3tvm2te26SchedulePostProcToPrimFuncENS_7runtime5ArrayINS1_9ObjectRefEvEENS_3tir4StmtENS1_8OptionalINS1_3MapINS0_6TensorENS5_6BufferEvvEEEE" title='tvm::te::SchedulePostProcToPrimFunc' data-ref="_ZN3tvm2te26SchedulePostProcToPrimFuncENS_7runtime5ArrayINS1_9ObjectRefEvEENS_3tir4StmtENS1_8OptionalINS1_3MapINS0_6TensorENS5_6BufferEvvEEEE" data-ref-filename="_ZN3tvm2te26SchedulePostProcToPrimFuncENS_7runtime5ArrayINS1_9ObjectRefEvEENS_3tir4StmtENS1_8OptionalINS1_3MapINS0_6TensorENS5_6BufferEvvEEEE">SchedulePostProcToPrimFunc</dfn>(<a class="type" href="../runtime/container/array.h.html#tvm::runtime::Array" title='tvm::runtime::Array' data-ref="tvm::runtime::Array" data-ref-filename="tvm..runtime..Array">Array</a>&lt;ObjectRef&gt; <dfn class="local col3 decl" id="243arg_list" title='arg_list' data-type='Array&lt;tvm::runtime::ObjectRef&gt;' data-ref="243arg_list" data-ref-filename="243arg_list">arg_list</dfn>, <a class="type" href="../tir/stmt.h.html#tvm::tir::Stmt" title='tvm::tir::Stmt' data-ref="tvm::tir::Stmt" data-ref-filename="tvm..tir..Stmt">Stmt</a> <dfn class="local col4 decl" id="244body" title='body' data-type='tvm::tir::Stmt' data-ref="244body" data-ref-filename="244body">body</dfn>,</td></tr>
<tr><th id="108">108</th><td>                                    <a class="type" href="../runtime/container/optional.h.html#tvm::runtime::Optional" title='tvm::runtime::Optional' data-ref="tvm::runtime::Optional" data-ref-filename="tvm..runtime..Optional">Optional</a>&lt;<a class="type" href="../runtime/container/map.h.html#tvm::runtime::Map" title='tvm::runtime::Map' data-ref="tvm::runtime::Map" data-ref-filename="tvm..runtime..Map">Map</a>&lt;<a class="type" href="tensor.h.html#tvm::te::Tensor" title='tvm::te::Tensor' data-ref="tvm::te::Tensor" data-ref-filename="tvm..te..Tensor">Tensor</a>, <a class="type" href="../tir/buffer.h.html#tvm::tir::Buffer" title='tvm::tir::Buffer' data-ref="tvm::tir::Buffer" data-ref-filename="tvm..tir..Buffer">Buffer</a>&gt;&gt; <dfn class="local col5 decl" id="245bindings" title='bindings' data-type='Optional&lt;Map&lt;tvm::te::Tensor, tvm::tir::Buffer&gt;&gt;' data-ref="245bindings" data-ref-filename="245bindings">bindings</dfn>);</td></tr>
<tr><th id="109">109</th><td></td></tr>
<tr><th id="110">110</th><td>}  <i>// namespace te</i></td></tr>
<tr><th id="111">111</th><td>}  <i>// namespace tvm</i></td></tr>
<tr><th id="112">112</th><td><u>#<span data-ppcond="28">endif</span>  // TVM_TE_SCHEDULE_PASS_H_</u></td></tr>
<tr><th id="113">113</th><td></td></tr>
</table><hr/><p id='footer'>
Generated while processing <a href='../../../src/auto_scheduler/compute_dag.cc.html'>tvm/src/auto_scheduler/compute_dag.cc</a><br/>Generated on <em>2022-Nov-29</em> from project tvm revision <em>95d2e9f</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
